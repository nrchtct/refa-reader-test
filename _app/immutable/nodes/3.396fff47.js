import{_ as ue}from"../chunks/preload-helper.41c905a7.js";import{S as Pe,i as Te,s as De,k as N,q as x,a as H,l as O,m as q,r as ee,h,c as J,n as m,b as w,G as M,u as be,H as j,I as ie,o as je,R as se,L as Ge,M as K,T as Qe,N as Oe,j as Ot,U as zt,e as W,J as ze,V as Re,W as Be,w as we,K as Xe,g as C,v as fe,d as U,f as ce,y as he,z as pe,A as ge,B as ve,X as Ie,Y as Ee,Z as He,_ as Ft,O as Bt,p as $e}from"../chunks/index.7c5e5199.js";import{b as _e,m as Ut,e as Wt,t as Le,a as Ae,i as Fe,c as Rt}from"../chunks/setup.57078eda.js";import{w as ke}from"../chunks/singletons.752dbb22.js";import{p as Xt}from"../chunks/stores.3a87fe6e.js";const Ht=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/01_Lipp_cultural_collection_on_fashion_en.md":()=>ue(()=>import("../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js"),["../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/01_Lipp_cultural_collections_on_fashion_de.md":()=>ue(()=>import("../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js"),["../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_de.md":()=>ue(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js"),["../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_en.md":()=>ue(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js"),["../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_de.md":()=>ue(()=>import("../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js"),["../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_en.md":()=>ue(()=>import("../chunks/03_Fashion_costume_terminology_en.9bf953e9.js"),["../chunks/03_Fashion_costume_terminology_en.9bf953e9.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp-GNM_Werkgruppen_de.md":()=>ue(()=>import("../chunks/04_Lipp-GNM_Werkgruppen_de.3054bb9d.js"),["../chunks/04_Lipp-GNM_Werkgruppen_de.3054bb9d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp_GNM_Werkgruppen_en.md":()=>ue(()=>import("../chunks/04_Lipp_GNM_Werkgruppen_en.b17de690.js"),["../chunks/04_Lipp_GNM_Werkgruppen_en.b17de690.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_de.md":()=>ue(()=>import("../chunks/05_family_portrait_de.84683c8f.js"),["../chunks/05_family_portrait_de.84683c8f.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_en.md":()=>ue(()=>import("../chunks/05_family_portrait_en.c6d2d123.js"),["../chunks/05_family_portrait_en.c6d2d123.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_de.md":()=>ue(()=>import("../chunks/06_earlymodern_images_de.3b541675.js"),["../chunks/06_earlymodern_images_de.3b541675.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_en.md":()=>ue(()=>import("../chunks/06_earlymodern_images_en.6c6eb206.js"),["../chunks/06_earlymodern_images_en.6c6eb206.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/99_Chronology_of_LipperheideCostumeLibrary_de.md":()=>ue(()=>import("../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js"),["../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>ue(()=>import("../chunks/template.5d8b86f5.js"),["../chunks/template.5d8b86f5.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:r}=n.default.render(),o=t.slice(17,-3),a=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...r.matchAll(a)].map(f=>f[2]).filter(f=>!f.startsWith("http")).map(f=>{const u=f.lastIndexOf("/");return u!==-1?f.substring(u+1):f});return{meta:n.metadata,path:o,text:r,links:c}}))},Jt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),Yt=!0,Qt=async()=>(await Ht()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Yl=Object.freeze(Object.defineProperty({__proto__:null,entries:Qt,load:Jt,prerender:Yt},Symbol.toStringTag,{value:"Module"})),Ze=ke(""),Je=ke(""),Ne=ke(!1),xe=ke([]),de=ke([]),Ue=ke([]),We=ke(0);function et(i){let e,l=i[0].meta.author+"",t;return{c(){e=N("div"),t=x(l),this.h()},l(s){e=O(s,"DIV",{class:!0});var n=q(e);t=ee(n,l),n.forEach(h),this.h()},h(){m(e,"class","author svelte-1hhry1v")},m(s,n){w(s,e,n),M(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&be(t,l)},d(s){s&&h(e)}}}function tt(i){var n;let e,l,t=((n=new Date(i[0].meta.date))==null?void 0:n.toLocaleDateString(i[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",s;return{c(){e=N("div"),l=N("div"),s=x(t),this.h()},l(r){e=O(r,"DIV",{class:!0});var o=q(e);l=O(o,"DIV",{class:!0});var a=q(l);s=ee(a,t),a.forEach(h),o.forEach(h),this.h()},h(){m(l,"class","date svelte-1hhry1v"),m(e,"class","date svelte-1hhry1v")},m(r,o){w(r,e,o),M(e,l),M(l,s)},p(r,o){var a;o&1&&t!==(t=((a=new Date(r[0].meta.date))==null?void 0:a.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&be(s,t)},d(r){r&&h(e)}}}function Zt(i){var P,L;let e,l,t,s,n=i[0].meta.title+"",r,o,a,c,f,u,_=((P=i[0].meta)==null?void 0:P.author)&&et(i),d=((L=i[0].meta)==null?void 0:L.date)&&tt(i);return{c(){e=N("a"),l=x("← Index"),t=H(),s=N("h1"),r=x(n),o=H(),a=N("div"),_&&_.c(),c=H(),d&&d.c(),f=H(),u=N("div"),this.h()},l(T){e=O(T,"A",{href:!0,class:!0,rel:!0});var S=q(e);l=ee(S,"← Index"),S.forEach(h),t=J(T),s=O(T,"H1",{class:!0});var V=q(s);r=ee(V,n),V.forEach(h),o=J(T),a=O(T,"DIV",{class:!0});var p=q(a);_&&_.l(p),c=J(p),d&&d.l(p),p.forEach(h),f=J(T),u=O(T,"DIV",{class:!0});var v=q(u);v.forEach(h),this.h()},h(){m(e,"href","/"),m(e,"class","index svelte-1hhry1v"),m(e,"rel","noopener noreferrer"),m(s,"class","svelte-1hhry1v"),m(a,"class","metadata svelte-1hhry1v"),m(u,"class","markdown svelte-1hhry1v")},m(T,S){w(T,e,S),M(e,l),w(T,t,S),w(T,s,S),M(s,r),w(T,o,S),w(T,a,S),_&&_.m(a,null),M(a,c),d&&d.m(a,null),w(T,f,S),w(T,u,S),u.innerHTML=i[1]},p(T,[S]){var V,p;S&1&&n!==(n=T[0].meta.title+"")&&be(r,n),(V=T[0].meta)!=null&&V.author?_?_.p(T,S):(_=et(T),_.c(),_.m(a,c)):_&&(_.d(1),_=null),(p=T[0].meta)!=null&&p.date?d?d.p(T,S):(d=tt(T),d.c(),d.m(a,null)):d&&(d.d(1),d=null)},i:j,o:j,d(T){T&&h(e),T&&h(t),T&&h(s),T&&h(o),T&&h(a),_&&_.d(),d&&d.d(),T&&h(f),T&&h(u)}}}const Kt=/\[\^([^\]]+)\]/g;let jt=100;function $t(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function xt(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function el(i,e,l){const t=l-e;return(i-e)/t*100}function tl(i,e,l){const t=l-e;return e+t*i/100}function ll(i,e,l){let t,s;ie(i,Ne,p=>l(8,t=p)),ie(i,Ze,p=>l(9,s=p));let{data:n}=e,{items:r}=e,{scrollTopVal:o}=e,a=n.text,c=1;const u=a.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(p,v,y)=>{if(console.log(p),v.startsWith("http"))return`<a class="external" target="_blank" href="${v}" title="${y}">${y}</a>`;{let I=v.split("/")[1];return`<a class="node-highlite" unique-id="${I}" id="${v.split("/")[1]}"
				data-id="${v.split("/")[1]}" title="${y}">${y}
				<span class="symbol node" unique-id="${I}" data-id="item_${v.split("/")[1]}"
				data-class="${r.filter(E=>E.label==y).map(E=>{var A,B;return(B=(A=E.data)==null?void 0:A["@type"])==null?void 0:B[1]})}">
					●
					</span></a>`}}).replace(Kt,(p,v)=>{const y=c++;return`<sup id="fn-${y}"><a href="#fnref-${y}">${y}</a></sup><span id="fn-${y}-content">${v}</span>`}),_=Array.from({length:c-1},(p,v)=>{var E;const y=v+1,I=(E=u.match(new RegExp(`<span id="fn-${y}-content">([^<]+)</span>`)))==null?void 0:E[1];return`<li id="fnref-${y}"> ${I}</li>`}).join(""),d=`${u}
	<ol class="biblio">${_}</ol>`;let P;je(async()=>{l(4,P=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),T(P),P.forEach(p=>{p.addEventListener("mouseenter",$t),p.addEventListener("mouseleave",xt),p.addEventListener("click",L)})});function L(p){P.forEach(I=>{const E=I.getAttribute("data-id"),A=document.querySelector(`.node[data-id="${E}"]`);A&&A.classList.remove("clicked"),I.classList.remove("clicked")});const v=p.currentTarget.getAttribute("data-id"),y=document.querySelector(`.node[data-id="${v}"]`);y&&y.classList.toggle("clicked"),p.currentTarget.classList.toggle("clicked"),se(Ze,s=v,s)}function T(p){let v=null;l(4,P=Array.from(p).map(y=>{let I=y.offsetTop;return v!==null&&I<=v?y.adjustedOffsetTop=v+jt:y.adjustedOffsetTop=I,v=y.adjustedOffsetTop,y}))}let S=0;function V(p,v){var y,I,E,A,B,F;if(!t){let D=(y=p==null?void 0:p[S])==null?void 0:y.adjustedOffsetTop,R=(I=p==null?void 0:p[S+1])==null?void 0:I.adjustedOffsetTop,Q=(E=p==null?void 0:p[S])==null?void 0:E.getAttribute("data-id"),le=(A=p==null?void 0:p[S+1])==null?void 0:A.getAttribute("data-id"),G=(B=document.querySelector(`.node[data-id="${Q}"]`))==null?void 0:B.offsetTop,$=(F=document.querySelector(`.node[data-id="${le}"]`))==null?void 0:F.offsetTop,g=el(v,D,R),b=tl(g,G,$);v>R&&S++,v<D&&S!=0&&S--;const k=document.querySelector(".links:first-of-type");D&&R&&k&&g&&b&&(k==null||k.scrollTo({top:b}))}}return i.$$set=p=>{"data"in p&&l(0,n=p.data),"items"in p&&l(2,r=p.items),"scrollTopVal"in p&&l(3,o=p.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&V(P,o)},[n,d,r,o,P]}class sl extends Pe{constructor(e){super(),Te(this,e,ll,Zt,De,{data:0,items:2,scrollTopVal:3})}}function lt(i,e,l){const t=i.slice();return t[27]=e[l],t}function il(i){let e,l=(i[0].title||"")+"",t;return{c(){e=N("div"),t=x(l),this.h()},l(s){e=O(s,"DIV",{class:!0});var n=q(e);t=ee(n,l),n.forEach(h),this.h()},h(){m(e,"class","title svelte-x5b8hf")},m(s,n){w(s,e,n),M(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&be(t,l)},d(s){s&&h(e)}}}function nl(i){let e,l,t,s,n,r=(i[0].title||"")+"",o,a,c;return{c(){e=N("img"),s=H(),n=N("div"),o=x(r),this.h()},l(f){e=O(f,"IMG",{src:!0,alt:!0,class:!0}),s=J(f),n=O(f,"DIV",{class:!0});var u=q(n);o=ee(u,r),u.forEach(h),this.h()},h(){Xe(e.src,l=i[5])||m(e,"src",l),m(e,"alt",t=i[0].title),m(e,"class","svelte-x5b8hf"),m(n,"class","title svelte-x5b8hf")},m(f,u){w(f,e,u),w(f,s,u),w(f,n,u),M(n,o),a||(c=K(e,"load",i[11]),a=!0)},p(f,u){u&32&&!Xe(e.src,l=f[5])&&m(e,"src",l),u&1&&t!==(t=f[0].title)&&m(e,"alt",t),u&1&&r!==(r=(f[0].title||"")+"")&&be(o,r)},d(f){f&&h(e),f&&h(s),f&&h(n),a=!1,c()}}}function rl(i){let e,l,t,s,n,r=i[0].title+"",o,a,c;return{c(){e=N("img"),s=H(),n=N("div"),o=x(r),this.h()},l(f){e=O(f,"IMG",{src:!0,alt:!0,class:!0}),s=J(f),n=O(f,"DIV",{class:!0});var u=q(n);o=ee(u,r),u.forEach(h),this.h()},h(){Xe(e.src,l=i[0].img.replace("square","large"))||m(e,"src",l),m(e,"alt",t=i[0].title),m(e,"class","svelte-x5b8hf"),m(n,"class","title svelte-x5b8hf")},m(f,u){w(f,e,u),w(f,s,u),w(f,n,u),M(n,o),a||(c=K(e,"load",i[11]),a=!0)},p(f,u){u&1&&!Xe(e.src,l=f[0].img.replace("square","large"))&&m(e,"src",l),u&1&&t!==(t=f[0].title)&&m(e,"alt",t),u&1&&r!==(r=f[0].title+"")&&be(o,r)},d(f){f&&h(e),f&&h(s),f&&h(n),a=!1,c()}}}function st(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=it(lt(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);w(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let r;for(r=0;r<l.length;r+=1){const o=lt(s,l,r);t[r]?t[r].p(o,n):(t[r]=it(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){ze(t,s),s&&h(e)}}}function it(i){let e,l,t,s=i[27].title+"",n,r;return{c(){e=N("a"),l=x("→"),t=N("em"),n=x(s),this.h()},l(o){e=O(o,"A",{class:!0,href:!0,target:!0,rel:!0});var a=q(e);l=ee(a,"→"),t=O(a,"EM",{});var c=q(t);n=ee(c,s),c.forEach(h),a.forEach(h),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",r=i[27].url),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(o,a){w(o,e,a),M(e,l),M(e,t),M(t,n)},p(o,a){a&256&&s!==(s=o[27].title+"")&&be(n,s),a&256&&r!==(r=o[27].url)&&m(e,"href",r)},d(o){o&&h(e)}}}function nt(i){let e;function l(n,r){return n[0].title==null||n[0].title.length==1?al:ol}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,r){s.m(n,r),w(n,e,r)},p(n,r){t===(t=l(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&h(e)}}}function ol(i){let e,l,t;return{c(){e=N("a"),l=x("→ Metadata"),this.h()},l(s){e=O(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=q(e);l=ee(n,"→ Metadata"),n.forEach(h),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",t=`${i[3]}/item/${i[4]}`),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(s,n){w(s,e,n),M(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&m(e,"href",t)},d(s){s&&h(e)}}}function al(i){let e,l,t;return{c(){e=N("a"),l=x("→ Metadata"),this.h()},l(s){e=O(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=q(e);l=ee(n,"→ Metadata"),n.forEach(h),this.h()},h(){m(e,"class","link svelte-x5b8hf"),m(e,"href",t=`${i[3]}/media/${i[4]}`),m(e,"target","_blank"),m(e,"rel","noopener noreferrer")},m(s,n){w(s,e,n),M(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&m(e,"href",t)},d(s){s&&h(e)}}}function ul(i){let e,l,t,s,n,r;function o(_,d){return _[0].img?rl:_[5]?nl:il}let a=o(i),c=a(i),f=i[8]!=null&&st(i),u=i[3]&&nt(i);return{c(){e=N("div"),c.c(),l=H(),f&&f.c(),t=H(),u&&u.c(),this.h()},l(_){e=O(_,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=q(e);c.l(d),l=J(d),f&&f.l(d),t=J(d),u&&u.l(d),d.forEach(h),this.h()},h(){m(e,"class","node svelte-x5b8hf"),m(e,"title",s=i[0].title),m(e,"source",i[9]),m(e,"target",i[4]),m(e,"data-id",i[4]),Ge(e,"selected",i[7]),Ge(e,"linkToEssay",i[8]!=null)},m(_,d){w(_,e,d),c.m(e,null),M(e,l),f&&f.m(e,null),M(e,t),u&&u.m(e,null),i[21](e),n||(r=[K(e,"mouseover",i[22]),K(e,"mouseleave",function(){Qe(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),K(e,"click",i[18]),K(e,"keydown",i[19]),K(e,"focus",i[20])],n=!0)},p(_,[d]){i=_,a===(a=o(i))&&c?c.p(i,d):(c.d(1),c=a(i),c&&(c.c(),c.m(e,l))),i[8]!=null?f?f.p(i,d):(f=st(i),f.c(),f.m(e,t)):f&&(f.d(1),f=null),i[3]?u?u.p(i,d):(u=nt(i),u.c(),u.m(e,null)):u&&(u.d(1),u=null),d&1&&s!==(s=i[0].title)&&m(e,"title",s),d&512&&m(e,"source",i[9]),d&16&&m(e,"target",i[4]),d&16&&m(e,"data-id",i[4]),d&128&&Ge(e,"selected",i[7]),d&256&&Ge(e,"linkToEssay",i[8]!=null)},i:j,o:j,d(_){_&&h(e),c.d(),f&&f.d(),u&&u.d(),i[21](null),n=!1,Oe(r)}}}function fl(i,e,l){let t,s,n,r,o,a,c=j,f=()=>(c(),c=Re(S,b=>l(17,a=b)),S),u,_=j,d=()=>(_(),_=Re(V,b=>l(24,u=b)),V),P,L;ie(i,de,b=>l(16,o=b)),ie(i,Ze,b=>l(25,P=b)),ie(i,Je,b=>l(10,L=b)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>_());let{datum:T}=e,{entities:S}=e;f();let{updatePosition:V}=e;d();let{essaysItems:p}=e,{site:v}=e,{openNode:y}=e,I,E=null;Ot(()=>{const b=T.source;b==`item_${P}`&&b!=E&&y(T,1),E=`item_${P}`}),zt(()=>{se(V,u=!0,u)});function A(){se(V,u=!0,u)}function B(b){var Y;const k=b.split("/"),z=a.find(ne=>ne["o:id"]==k.slice(-1)[0]);return(Y=z==null?void 0:z.thumbnail_display_urls)==null?void 0:Y.large}let F;function D(b){const k=b,z=document.querySelector(`.node-highlite[data-id="${k}"]`);z&&z.classList.add("hover"),F.classList.add("hover")}function R(b){const k=b,z=document.querySelector(`.node-highlite[data-id="${k}"]`);z&&z.classList.remove("hover"),F.classList.remove("hover")}function Q(b){Be.call(this,i,b)}function le(b){Be.call(this,i,b)}function G(b){Be.call(this,i,b)}function $(b){we[b?"unshift":"push"](()=>{F=b,l(6,F)})}const g=()=>{se(Je,L=s,L),D(s)};return i.$$set=b=>{"datum"in b&&l(0,T=b.datum),"entities"in b&&f(l(1,S=b.entities)),"updatePosition"in b&&d(l(2,V=b.updatePosition)),"essaysItems"in b&&l(14,p=b.essaysItems),"site"in b&&l(3,v=b.site),"openNode"in b&&l(15,y=b.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&a&&l(5,I=B(T.target)),i.$$.dirty&1&&l(9,t=T.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=T.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=p.find(b=>b.id==s)),i.$$.dirty&65537&&l(7,r=o.some(b=>(b==null?void 0:b.id)==T.target))},[T,S,V,v,s,I,F,r,n,t,L,A,D,R,p,y,o,a,Q,le,G,$,g]}class Vt extends Pe{constructor(e){super(),Te(this,e,fl,ul,De,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var cl=0;function _l(){return++cl}var Ke=Function("return this")();typeof Ke.__nextId!="function"&&(Ke.__nextId=_l);function Mt(){return"uid-"+Ke.__nextId()}function dl(i){let e,l,t;return{c(){e=N("div"),this.h()},l(s){e=O(s,"DIV",{source:!0,target:!0}),q(e).forEach(h),this.h()},h(){m(e,"source",l=i[0].source.split("/").slice(-1)[0]),m(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){w(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&m(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&m(e,"target",t)},i:j,o:j,d(s){s&&h(e),i[8](null)}}}let rt=0;function ml(i,e,l){let t,s,n,r,o=j,a=()=>(o(),o=Re(d,p=>l(5,r=p)),d),c,f;ie(i,Ue,p=>l(12,n=p)),ie(i,We,p=>l(6,c=p)),ie(i,de,p=>l(7,f=p)),i.$$.on_destroy.push(()=>o());let{datum:u}=e,{label:_}=e,{updatePosition:d}=e;a();let P,L=Mt();function T(p,v=0,y){const I=p.split("/").slice(-1)[0],E=[...document.querySelectorAll(`.node[data-id="${I}"]`)],A=[];return E.forEach(B=>{const F=B.getBoundingClientRect(),D={x:F.x+c,y:F.y+v,width:F.width-v/2,height:F.height,selected:"selected"};A.push(D)}),A}function S(){delete n[L],se(d,r=!1,r);const p=T(u.source,rt),v=T(u.target,rt);P&&(P.getBoundingClientRect().x,P.getBoundingClientRect().y),p.forEach(y=>{v.forEach(I=>{let E=100;const A=y==null?void 0:y.selected;let B,F,D,R,Q;B=y.x+y.width,F=y.y,D=I.x,R=I.y,I.x<y.x||I.x==y.x?Q=I.x-E*5:I.x==y.x?Q=I.x-E*3:Q=I.x-E,u.source.includes("item_")&&(Q=I.x-E);const le=B+E,G=F,$=I.y,g=`M${B},${F}C${le},${G} ${Q},${$} ${D},${R}`;se(Ue,n[L]=n[L]||[],n),n[L].push({class:s,d:g,label:_,selected:A,datum:{source:u.source.split("/").at(-1),target:u.target.split("/").at(-1)},reverse:u==null?void 0:u.reverse})})})}zt(()=>{delete n[L],se(Ue,n=[],n)});function V(p){we[p?"unshift":"push"](()=>{P=p,l(2,P)})}return i.$$set=p=>{"datum"in p&&l(0,u=p.datum),"label"in p&&l(3,_=p.label),"updatePosition"in p&&a(l(1,d=p.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&S(),i.$$.dirty&128&&l(4,t=f.slice(-1)[0].id),i.$$.dirty&17&&(s=u.target==t||u.source==t?"highlite":"")},[u,d,P,_,t,r,c,f,V]}class qt extends Pe{constructor(e){super(),Te(this,e,ml,dl,De,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function hl(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let r;for(;r=e.exec(i);)if(!r[2].includes("http")){const p=r[3],v=r[2];v.includes("item/")&&l.push(v.split("/")[1]),v.includes("set/")&&s.push(v.split("/")[1]),v.includes("media/")&&t.push(v.split("/")[1]),n.push({label:p,id:v.split("/")[1]})}const o=Wt,c=V(l,o).map(p=>{const v=`${_e}/items?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(v).then(y=>y.json())}),u=V(s,o).map(p=>{const v=`${_e}/item_sets?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(v).then(y=>y.json())}),d=V(t,o).map(p=>{const v=`${_e}/media?${p.map(y=>`id[]=${y}`).join("&")}`;return fetch(v).then(y=>y.json())}),P=await Promise.all(c),L=await Promise.all(u),T=await Promise.all(d),S=[...P.flat(),...T.flat(),...L.flat()];for(let p=0;p<S.length;p++){const v=n.find(I=>S[p]["o:id"]==I.id),y=S[p];v.uniqueId=Mt(),v.data=y}return n;function V(p,v){const y=[];for(let I=0;I<p.length;I+=v)y.push(p.slice(I,I+v));return y}}async function Ct(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,r=pl(s,n);e=[...e,...r]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function pl(i,e){var a;let l=[],t=`${_e}/resources/${i["o:id"]}`;e&&l.push({source:`${_e}/resources/${e.id}`,target:t,img:(a=i==null?void 0:i.thumbnail_display_urls)==null?void 0:a.large,title:i["o:title"]});let s,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let o=async function(c){var f,u,_,d,P,L,T,S,V,p,v,y;for(let I in c)if(I==="@id"&&c[I].startsWith(_e)&&(c["o:title"]||c.display_title||n==!0)){let E=c[I].split("/").pop(),A=`${_e}/resources/${E}`;const B=c["o:title"]||c.display_title,F=(c==null?void 0:c.thumbnail_url)||((f=c==null?void 0:c.thumbnail_display_urls)==null?void 0:f.large),D=l.some(le=>le.source===t&&le.target===A);let R=((_=(u=c.property_label)==null?void 0:u.replace("_"," "))==null?void 0:_.replace(r,""))||(s==null?void 0:s.replace(r,""));const Q=Ut.map(le=>le.props.includes(R)?le.key:"").find(Boolean);D||l.push({source:t,target:A,title:B,img:F,property:R,category:Q,reverse:n})}else if(I==="@id"&&!c[I].startsWith(_e)&&c["o:label"]){let E=((P=(d=c.property_label)==null?void 0:d.replace("_"," "))==null?void 0:P.replace(r,""))||(s==null?void 0:s.replace(r,""));l.push({source:t,target:c[I],title:c["o:label"],property:E,category:"",external:!0,reverse:n})}else if(I==="@id"&&s=="media"&&t.split("/").pop()!=((L=c==null?void 0:c["o:primary_media"])==null?void 0:L["@id"].split("/").pop())){let E=((S=(T=c.property_label)==null?void 0:T.replace("_"," "))==null?void 0:S.replace(r,""))||(s==null?void 0:s.replace(r,"")),A=c[I].split("/").pop(),B=`${_e}/resources/${A}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:n})}else if(I==="@id"&&s=="item"){let E=((p=(V=c.property_label)==null?void 0:V.replace("_"," "))==null?void 0:p.replace(r,""))||(s==null?void 0:s.replace(r,"")),A=c[I].split("/").pop(),B=`${_e}/resources/${A}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:E,category:"",reverse:n})}else typeof c[I]=="object"&&(isNaN(I)&&(s=(y=(v=(I==null?void 0:I.split(":"))[1])==null?void 0:v.split("_"))==null?void 0:y.join(" "),I=="@reverse"&&(n=!0)),o(c[I]))};return o(i),l}function ot(i,e,l){const t=i.slice();return t[22]=e[l],t}function at(i){let e,l;return{c(){e=N("div"),l=x("Loading..."),this.h()},l(t){e=O(t,"DIV",{class:!0});var s=q(e);l=ee(s,"Loading..."),s.forEach(h),this.h()},h(){m(e,"class","loading svelte-1kyenid")},m(t,s){w(t,e,s),M(e,l)},d(t){t&&h(e)}}}function ut(i){let e,l,t=i[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=ct(ot(i,t,r));const n=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let a=0;a<s.length;a+=1)s[a].m(r,o);w(r,e,o),l=!0},p(r,o){if(o&639){t=r[0];let a;for(a=0;a<t.length;a+=1){const c=ot(r,t,a);s[a]?(s[a].p(c,o),C(s[a],1)):(s[a]=ct(c),s[a].c(),C(s[a],1),s[a].m(e.parentNode,e))}for(fe(),a=t.length;a<s.length;a+=1)n(a);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)C(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);l=!1},d(r){ze(s,r),r&&h(e)}}}function gl(i){var t;let e,l;return e=new qt({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){he(e.$$.fragment)},l(s){pe(e.$$.fragment,s)},m(s,n){ge(e,s,n),l=!0},p(s,n){var o;const r={};n&1&&(r.datum=s[22]),n&8&&(r.updatePosition=s[3]),n&1&&(r.label=((o=s[22])==null?void 0:o.property)||""),e.$set(r)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){ve(e,s)}}}function vl(i){let e,l,t=i[22].source!=i[22].target&&ft(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),w(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&C(t,1)):(t=ft(s),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(C(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function ft(i){var c;let e,l,t,s,n;const r=[kl,bl],o=[];function a(f,u){var _;return(_=f[22])!=null&&_.external?1:0}return e=a(i),l=o[e]=r[e](i),s=new qt({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=H(),he(s.$$.fragment)},l(f){l.l(f),t=J(f),pe(s.$$.fragment,f)},m(f,u){o[e].m(f,u),w(f,t,u),ge(s,f,u),n=!0},p(f,u){var P;let _=e;e=a(f),e===_?o[e].p(f,u):(fe(),U(o[_],1,1,()=>{o[_]=null}),ce(),l=o[e],l?l.p(f,u):(l=o[e]=r[e](f),l.c()),C(l,1),l.m(t.parentNode,t));const d={};u&1&&(d.datum=f[22]),u&8&&(d.updatePosition=f[3]),u&1&&(d.label=((P=f[22])==null?void 0:P.property)||""),s.$set(d)},i(f){n||(C(l),C(s.$$.fragment,f),n=!0)},o(f){U(l),U(s.$$.fragment,f),n=!1},d(f){o[e].d(f),f&&h(t),ve(s,f)}}}function bl(i){let e,l,t,s;return l=new Vt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=N("a"),he(l.$$.fragment),this.h()},l(n){e=O(n,"A",{href:!0,target:!0,rel:!0});var r=q(e);pe(l.$$.fragment,r),r.forEach(h),this.h()},h(){m(e,"href",t=i[22].target),m(e,"target","_blank"),m(e,"rel","noreferrer")},m(n,r){w(n,e,r),ge(l,e,null),s=!0},p(n,r){const o={};r&64&&(o.site=n[6]),r&4&&(o.entities=n[2]),r&8&&(o.updatePosition=n[3]),r&1&&(o.datum=n[22]),r&32&&(o.essaysItems=n[5]),l.$set(o),(!s||r&1&&t!==(t=n[22].target))&&m(e,"href",t)},i(n){s||(C(l.$$.fragment,n),s=!0)},o(n){U(l.$$.fragment,n),s=!1},d(n){n&&h(e),ve(l)}}}function kl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Vt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){he(e.$$.fragment)},l(n){pe(e.$$.fragment,n)},m(n,r){ge(e,n,r),l=!0},p(n,r){i=n;const o={};r&64&&(o.site=i[6]),r&4&&(o.entities=i[2]),r&8&&(o.updatePosition=i[3]),r&1&&(o.datum=i[22]),r&32&&(o.essaysItems=i[5]),e.$set(o)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){U(e.$$.fragment,n),l=!1},d(n){ve(e,n)}}}function ct(i){let e,l,t,s,n;function r(...f){return i[15](i[22],...f)}const o=[vl,gl],a=[];function c(f,u){return u&3&&(e=null),e==null&&(e=!!f[1].some(r)),e?0:f[22].source&&f[22].target&&f[22].source!=f[22].target?1:-1}return~(l=c(i,-1))&&(t=a[l]=o[l](i)),{c(){t&&t.c(),s=W()},l(f){t&&t.l(f),s=W()},m(f,u){~l&&a[l].m(f,u),w(f,s,u),n=!0},p(f,u){i=f;let _=l;l=c(i,u),l===_?~l&&a[l].p(i,u):(t&&(fe(),U(a[_],1,1,()=>{a[_]=null}),ce()),~l?(t=a[l],t?t.p(i,u):(t=a[l]=o[l](i),t.c()),C(t,1),t.m(s.parentNode,s)):t=null)},i(f){n||(C(t),n=!0)},o(f){U(t),n=!1},d(f){~l&&a[l].d(f),f&&h(s)}}}function yl(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,r=i[8]&&at(),o=s&&ut(i);return{c(){e=N("section"),r&&r.c(),l=H(),t=N("div"),o&&o.c()},l(a){e=O(a,"SECTION",{});var c=q(e);r&&r.l(c),l=J(c),t=O(c,"DIV",{});var f=q(t);o&&o.l(f),f.forEach(h),c.forEach(h)},m(a,c){w(a,e,c),r&&r.m(e,null),M(e,l),M(e,t),o&&o.m(t,null),i[18](e),n=!0},p(a,[c]){a[8]?r||(r=at(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),c&1&&(s=a[0]&&typeof a[0]=="object"&&Object.keys(a[0]).length>0),s?o?(o.p(a,c),c&1&&C(o,1)):(o=ut(a),o.c(),C(o,1),o.m(t,null)):o&&(fe(),U(o,1,1,()=>{o=null}),ce())},i(a){n||(C(o),n=!0)},o(a){U(o),n=!1},d(a){a&&h(e),r&&r.d(),o&&o.d(),i[18](null)}}}function Il(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function El(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function wl(i,e,l){let t,s=j,n=()=>(s(),s=Re(_,D=>l(20,t=D)),_),r;ie(i,de,D=>l(21,r=D)),i.$$.on_destroy.push(()=>s());let{category:o}=e,{data:a}=e,{newData:c}=e,{dataLen:f}=e,{entities:u}=e,{updatePosition:_}=e;n();let{index:d}=e,{loadData:P}=e,{defaultNodes:L}=e,{batchSize:T}=e,{essaysItems:S}=e,{site:V}=e,p,v,y={nodes:[],links:[]};async function I(D,R){Il(R),l(8,v=!0),r.splice(R,r.length-R);let Q=r.map(k=>k.data).flat();const G=await(await fetch(D.target)).json();if(G!=null&&G["o:items"]&&r.length==1){let k=[];const z=G["o:items"]["@id"];(await(await fetch(z)).json()).forEach(te=>{k.push(te)});let Z=k.map(te=>({"o:title":te["o:title"],"@id":te["@id"],thumbnail_display_urls:te.thumbnail_display_urls}));G.related={...Z}}y=await Ct([{data:G}]);let $=y.links.filter(k=>k.source===D.target||k.target===D.target),g=El([...L,...Q],$),b=$.slice(0,T);se(de,r[R]={id:D.target,data:$.sort((k,z)=>{if(k.property)return k.property.localeCompare(z.property)}),page:0,new:g,paginate:b},r),l(8,v=!1),g.length>0&&P(b,T),se(_,t=!0,t)}const E=(D,R)=>(R==null?void 0:R.title)===D.title,A=D=>{I(D,d+1)},B=D=>{I(D,d+1)};function F(D){we[D?"unshift":"push"](()=>{p=D,l(7,p)})}return i.$$set=D=>{"category"in D&&l(10,o=D.category),"data"in D&&l(0,a=D.data),"newData"in D&&l(1,c=D.newData),"dataLen"in D&&l(11,f=D.dataLen),"entities"in D&&l(2,u=D.entities),"updatePosition"in D&&n(l(3,_=D.updatePosition)),"index"in D&&l(4,d=D.index),"loadData"in D&&l(12,P=D.loadData),"defaultNodes"in D&&l(13,L=D.defaultNodes),"batchSize"in D&&l(14,T=D.batchSize),"essaysItems"in D&&l(5,S=D.essaysItems),"site"in D&&l(6,V=D.site)},[a,c,u,_,d,S,V,p,v,I,o,f,P,L,T,E,A,B,F]}class Gt extends Pe{constructor(e){super(),Te(this,e,wl,yl,De,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function _t(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function Ye(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function dt(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...o){return i[20](t[37],...o)});t[38]=s;const n=t[32].data.filter(function(...o){return i[21](t[37],...o)}).length;return t[36]=n,t}function Pl(i){let e,l,t=i[5],s=[];for(let r=0;r<t.length;r+=1)s[r]=bt(_t(i,t,r));const n=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let a=0;a<s.length;a+=1)s[a].m(r,o);w(r,e,o),l=!0},p(r,o){if(o[0]&16063){t=r[5];let a;for(a=0;a<t.length;a+=1){const c=_t(r,t,a);s[a]?(s[a].p(c,o),C(s[a],1)):(s[a]=bt(c),s[a].c(),C(s[a],1),s[a].m(e.parentNode,e))}for(fe(),a=t.length;a<s.length;a+=1)n(a);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)C(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);l=!1},d(r){ze(s,r),r&&h(e)}}}function Tl(i){let e,l,t;return{c(){e=N("div"),l=N("h4"),t=x("Loading Graph..."),this.h()},l(s){e=O(s,"DIV",{});var n=q(e);l=O(n,"H4",{class:!0});var r=q(l);t=ee(r,"Loading Graph..."),r.forEach(h),n.forEach(h),this.h()},h(){m(l,"class","loading svelte-d0zru6")},m(s,n){w(s,e,n),M(e,l),M(l,t)},p:j,i:j,o:j,d(s){s&&h(e)}}}function Dl(i){let e,l;return{c(){e=N("div"),l=x("There are no connections."),this.h()},l(t){e=O(t,"DIV",{class:!0});var s=q(e);l=ee(s,"There are no connections."),s.forEach(h),this.h()},h(){m(e,"class","no-items svelte-d0zru6")},m(t,s){w(t,e,s),M(e,l)},p:j,i:j,o:j,d(t){t&&h(e)}}}function Sl(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,r=i[3].mainCategories,o=[];for(let u=0;u<r.length;u+=1)o[u]=ht(dt(i,r,u));const a=u=>U(o[u],1,1,()=>{o[u]=null});let c=t&&pt(Ye(i)),f=i[32].paginate.length<i[32].new.length&&vt(i);return{c(){e=N("div");for(let u=0;u<o.length;u+=1)o[u].c();l=H(),c&&c.c(),s=H(),f&&f.c()},l(u){e=O(u,"DIV",{});var _=q(e);for(let d=0;d<o.length;d+=1)o[d].l(_);l=J(_),c&&c.l(_),s=J(_),f&&f.l(_),_.forEach(h)},m(u,_){w(u,e,_);for(let d=0;d<o.length;d+=1)o[d].m(e,null);M(e,l),c&&c.m(e,null),M(e,s),f&&f.m(e,null),n=!0},p(u,_){if(_[0]&7725){r=u[3].mainCategories;let d;for(d=0;d<r.length;d+=1){const P=dt(u,r,d);o[d]?(o[d].p(P,_),C(o[d],1)):(o[d]=ht(P),o[d].c(),C(o[d],1),o[d].m(e,l))}for(fe(),d=r.length;d<o.length;d+=1)a(d);ce()}_[0]&40&&(t=u[32].paginate.filter(u[19]).length>0),t?c?(c.p(Ye(u),_),_[0]&40&&C(c,1)):(c=pt(Ye(u)),c.c(),C(c,1),c.m(e,s)):c&&(fe(),U(c,1,1,()=>{c=null}),ce()),u[32].paginate.length<u[32].new.length?f?f.p(u,_):(f=vt(u),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(u){if(!n){for(let _=0;_<r.length;_+=1)C(o[_]);C(c),n=!0}},o(u){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)U(o[_]);U(c),n=!1},d(u){u&&h(e),ze(o,u),c&&c.d(),f&&f.d()}}}function mt(i){let e,l;return e=new Gt({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function ht(i){let e,l,t=i[38].length>0&&mt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),w(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&C(t,1)):(t=mt(s),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(C(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function pt(i){let e,l,t=i[35].length>0&&gt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),w(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&C(t,1)):(t=gt(s),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(C(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&h(e)}}}function gt(i){let e,l;return e=new Gt({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,s){ge(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function vt(i){let e,l,t,s;return{c(){e=N("div"),l=x("Load more"),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=q(e);l=ee(r,"Load more"),r.forEach(h),this.h()},h(){m(e,"class","more svelte-d0zru6")},m(n,r){w(n,e,r),M(e,l),t||(s=[K(e,"click",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),K(e,"keydown",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,r){i=n},d(n){n&&h(e),t=!1,Oe(s)}}}function bt(i){let e,l,t,s,n,r,o;const a=[Sl,Dl],c=[];function f(u,_){var d,P;return(d=u[32])!=null&&d.new&&((P=u[32])==null?void 0:P.new.length)>0?0:1}return l=f(i),t=c[l]=a[l](i),{c(){e=N("div"),t.c(),s=H(),this.h()},l(u){e=O(u,"DIV",{class:!0,id:!0});var _=q(e);t.l(_),s=J(_),_.forEach(h),this.h()},h(){m(e,"class","links svelte-d0zru6"),m(e,"id","col_"+i[34])},m(u,_){w(u,e,_),c[l].m(e,null),M(e,s),i[22](e),n=!0,r||(o=[K(e,"scroll",i[23]),K(e,"click",i[24]),K(e,"keypress",i[25])],r=!0)},p(u,_){let d=l;l=f(u),l===d?c[l].p(u,_):(fe(),U(c[d],1,1,()=>{c[d]=null}),ce(),t=c[l],t?t.p(u,_):(t=c[l]=a[l](u),t.c()),C(t,1),t.m(e,s))},i(u){n||(C(t),n=!0)},o(u){U(t),n=!1},d(u){u&&h(e),c[l].d(),i[22](null),r=!1,Oe(o)}}}function kt(i){let e,l,t,s;return{c(){e=N("div"),l=x("✕"),this.h()},l(n){e=O(n,"DIV",{class:!0});var r=q(e);l=ee(r,"✕"),r.forEach(h),this.h()},h(){m(e,"class","close svelte-d0zru6")},m(n,r){w(n,e,r),M(e,l),t||(s=[K(e,"click",i[27]),K(e,"keypress",i[28])],t=!0)},p:j,d(n){n&&h(e),t=!1,Oe(s)}}}function Ll(i){let e,l,t,s,n,r;const o=[Tl,Pl],a=[];function c(u,_){return u[8].length==0?0:1}l=c(i),t=a[l]=o[l](i);let f=i[5].length>1&&kt(i);return{c(){e=N("div"),t.c(),s=H(),f&&f.c(),n=W(),this.h()},l(u){e=O(u,"DIV",{class:!0});var _=q(e);t.l(_),_.forEach(h),s=J(u),f&&f.l(u),n=W(),this.h()},h(){m(e,"class","graph svelte-d0zru6")},m(u,_){w(u,e,_),a[l].m(e,null),i[26](e),w(u,s,_),f&&f.m(u,_),w(u,n,_),r=!0},p(u,_){let d=l;l=c(u),l===d?a[l].p(u,_):(fe(),U(a[d],1,1,()=>{a[d]=null}),ce(),t=a[l],t?t.p(u,_):(t=a[l]=o[l](u),t.c()),C(t,1),t.m(e,null)),u[5].length>1?f?f.p(u,_):(f=kt(u),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null)},i(u){r||(C(t),r=!0)},o(u){U(t),r=!1},d(u){u&&h(e),a[l].d(),i[26](null),u&&h(s),f&&f.d(u),u&&h(n)}}}function Al(i,e,l){const t=l-e;return(i-e)/t*100}function Nl(i,e,l){const t=l-e;return e+t*i/100}function Ol(i,e,l){let t,s,n,r;ie(i,Ne,k=>l(30,s=k)),ie(i,de,k=>l(5,n=k));let{updatePosition:o}=e,{handlePosition:a}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:u}=e,{config:_}=e,{items:d}=e,{screenSize:P}=e,L;const T=ke([]);ie(i,T,k=>l(8,r=k));let S=_.batch,V,p=c.nodes.filter(k=>f.includes(k.id));je(async()=>{v(c.nodes,S)}),Ot(()=>{V.lastElementChild&&P>600&&V.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),a()});async function v(k,z){const Y=k.map(Z=>{var oe,X;return(((oe=Z==null?void 0:Z.id)==null?void 0:oe.split("/"))||((X=Z==null?void 0:Z.target)==null?void 0:X.split("/"))).slice(-1)[0]}),ne=Math.ceil(Y.length/z);for(let Z=0;Z<ne;Z++){const te=Y.slice(Z*z,(Z+1)*z);let oe=`${_.api}/items?${te.map(re=>`id[]=${re}`).join("&")}`,X=await fetch(oe),ae=await X.json();T.update(re=>(re.includes(...ae)||re.push(...ae),re)),ae.length!=te.length&&(oe=`${_.api}/media?${te.map(re=>`id[]=${re}`).join("&")}`,X=await fetch(oe),ae=await X.json(),T.update(re=>(re.includes(...ae)||re.push(...ae),re)))}}let y;const I=(k,z)=>{var Y,ne,Z,te,oe;if(z!=null){const X=((Y=n[k])==null?void 0:Y.page)+1||0;se(de,n[k]={...n[k],page:X,paginate:(ne=n[k])==null?void 0:ne.data.slice(0,X*S)},n),(Z=n[k])!=null&&Z.data&&((te=n[k])==null?void 0:te.paginate.length)!=((oe=n[k])==null?void 0:oe.data.length)&&v(n[k].paginate.slice(-S),S)}};let E=0;function A(k){var z,Y,ne,Z,te,oe;if(s){const X=document.querySelectorAll(".links:first-of-type .node");let ae=(z=X==null?void 0:X[E])==null?void 0:z.offsetTop,re=(Y=X==null?void 0:X[E])==null?void 0:Y.getAttribute("data-id"),me=(ne=X==null?void 0:X[E+1])==null?void 0:ne.offsetTop,ye=(Z=X==null?void 0:X[E+1])==null?void 0:Z.getAttribute("data-id"),Ve=(te=document.querySelector(`.node-highlite[data-id="${re}"]`))==null?void 0:te.offsetTop,Me=(oe=document.querySelector(`.node-highlite[data-id="${ye}"]`))==null?void 0:oe.offsetTop,qe=Al(k,ae,me),Se=Nl(qe,Ve,Me);const Ce=document.querySelector(".markdown__container");k>me&&E++,k<ae&&E!=0&&E--,Ce&&Se&&ae!==me&&Se>0&&(Ce==null||Ce.scrollTo({top:Se}))}}const B=k=>!_.mainCategories.some(z=>z.props.includes(k.property)),F=(k,z)=>k.props.includes(z.property),D=(k,z)=>k.props.includes(z.property);function R(k){we[k?"unshift":"push"](()=>{y=k,l(7,y)})}const Q=()=>{let k=document.querySelector("#col_0");k.addEventListener("scroll",z=>{l(4,L=k==null?void 0:k.scrollTop)}),a()},le=()=>{a()},G=()=>{a()};function $(k){we[k?"unshift":"push"](()=>{V=k,l(6,V)})}const g=()=>{se(de,n=[],n),a()},b=()=>{se(de,n=[],n)};return i.$$set=k=>{"updatePosition"in k&&l(0,o=k.updatePosition),"handlePosition"in k&&l(1,a=k.handlePosition),"data"in k&&l(14,c=k.data),"visibleItemsID"in k&&l(15,f=k.visibleItemsID),"essaysItems"in k&&l(2,u=k.essaysItems),"config"in k&&l(3,_=k.config),"items"in k&&l(16,d=k.items),"screenSize"in k&&l(17,P=k.screenSize)},i.$$.update=()=>{var k;i.$$.dirty[0]&65544&&l(18,t=d.filter(z=>z==null?void 0:z.data).map(z=>{var Y,ne;return{img:(Y=z.data)==null?void 0:Y.thumbnail_display_urls.large,source:`item_${z.id}`,target:`${_.api}/resources/${z.id}`,title:((ne=z.data)==null?void 0:ne["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||de&&((k=n==null?void 0:n[0])==null?void 0:k.data.length)==0)&&se(de,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&A(L)},[o,a,u,_,L,n,V,y,r,T,S,p,v,I,c,f,d,P,t,B,F,D,R,Q,le,G,$,g,b]}class zl extends Pe{constructor(e){super(),Te(this,e,Ol,Ll,De,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function yt(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function It(i,e,l){const t=i.slice();return t[6]=e[l],t}function Et(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=At(yt(i,t,n));return{c(){e=Ie("svg"),l=Ie("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=Ee(n,"svg",{class:!0});var r=q(e);l=Ee(r,"g",{});var o=q(l);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(h),r.forEach(h),this.h()},h(){m(e,"class","svelte-1ddz0y9")},m(n,r){w(n,e,r),M(e,l);for(let o=0;o<s.length;o+=1)s[o].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let o;for(o=0;o<t.length;o+=1){const a=yt(n,t,o);s[o]?s[o].p(a,r):(s[o]=At(a),s[o].c(),s[o].m(l,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&h(e),ze(s,n)}}}function wt(i){let e,l,t=i[6].label+"",s,n,r,o,a,c,f,u,_=i[6].label+"",d,P,L,T,S,V,p=i[6].reverse&&i[6].label&&Pt(),v=!i[6].reverse&&i[6].label&&Tt(),y=i[6].reverse&&i[6].label&&Dt(),I=!i[6].reverse&&i[6].label&&St();return{c(){e=Ie("text"),l=Ie("textPath"),s=x(t),p&&p.c(),n=W(),v&&v.c(),f=Ie("text"),u=Ie("textPath"),d=x(_),y&&y.c(),P=W(),I&&I.c(),this.h()},l(E){e=Ee(E,"text",{class:!0,source:!0,target:!0});var A=q(e);l=Ee(A,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=q(l);s=ee(B,t),p&&p.l(B),n=W(),v&&v.l(B),B.forEach(h),A.forEach(h),f=Ee(E,"text",{class:!0,source:!0,target:!0});var F=q(f);u=Ee(F,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var D=q(u);d=ee(D,_),y&&y.l(D),P=W(),I&&I.l(D),D.forEach(h),F.forEach(h),this.h()},h(){m(l,"alignment-baseline","middle"),m(l,"href",r="#path_"+i[2]),m(l,"startOffset","99%"),m(l,"text-anchor","end"),m(e,"class",o="background "+i[6].class+" svelte-1ddz0y9"),m(e,"source",a=i[6].datum.source),m(e,"target",c=i[6].datum.target),m(u,"alignment-baseline","middle"),m(u,"href",L="#path_"+i[2]),m(u,"startOffset","99%"),m(u,"text-anchor","end"),m(f,"class",T=He(i[6].class)+" svelte-1ddz0y9"),m(f,"source",S=i[6].datum.source),m(f,"target",V=i[6].datum.target)},m(E,A){w(E,e,A),M(e,l),M(l,s),p&&p.m(l,null),M(l,n),v&&v.m(l,null),w(E,f,A),M(f,u),M(u,d),y&&y.m(u,null),M(u,P),I&&I.m(u,null)},p(E,A){A&1&&t!==(t=E[6].label+"")&&be(s,t),E[6].reverse&&E[6].label?p||(p=Pt(),p.c(),p.m(l,n)):p&&(p.d(1),p=null),!E[6].reverse&&E[6].label?v||(v=Tt(),v.c(),v.m(l,null)):v&&(v.d(1),v=null),A&1&&r!==(r="#path_"+E[2])&&m(l,"href",r),A&1&&o!==(o="background "+E[6].class+" svelte-1ddz0y9")&&m(e,"class",o),A&1&&a!==(a=E[6].datum.source)&&m(e,"source",a),A&1&&c!==(c=E[6].datum.target)&&m(e,"target",c),A&1&&_!==(_=E[6].label+"")&&be(d,_),E[6].reverse&&E[6].label?y||(y=Dt(),y.c(),y.m(u,P)):y&&(y.d(1),y=null),!E[6].reverse&&E[6].label?I||(I=St(),I.c(),I.m(u,null)):I&&(I.d(1),I=null),A&1&&L!==(L="#path_"+E[2])&&m(u,"href",L),A&1&&T!==(T=He(E[6].class)+" svelte-1ddz0y9")&&m(f,"class",T),A&1&&S!==(S=E[6].datum.source)&&m(f,"source",S),A&1&&V!==(V=E[6].datum.target)&&m(f,"target",V)},d(E){E&&h(e),p&&p.d(),v&&v.d(),E&&h(f),y&&y.d(),I&&I.d()}}}function Pt(i){let e;return{c(){e=x(" -")},l(l){e=ee(l," -")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Tt(i){let e;return{c(){e=x("→")},l(l){e=ee(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Dt(i){let e;return{c(){e=x("←")},l(l){e=ee(l,"←")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function St(i){let e;return{c(){e=x("→")},l(l){e=ee(l,"→")},m(l,t){w(l,e,t)},d(l){l&&h(e)}}}function Lt(i){let e,l,t,s,n,r,o=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&wt(i);return{c(){e=Ie("path"),o&&o.c(),r=W(),this.h()},l(a){e=Ee(a,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),q(e).forEach(h),o&&o.l(a),r=W(),this.h()},h(){m(e,"id",l="path_"+i[2]),m(e,"class",t=He(i[6].class)+" svelte-1ddz0y9"),m(e,"data-attr",s=i[6].selected),m(e,"d",n=i[6].d)},m(a,c){w(a,e,c),o&&o.m(a,c),w(a,r,c)},p(a,c){c&1&&l!==(l="path_"+a[2])&&m(e,"id",l),c&1&&t!==(t=He(a[6].class)+" svelte-1ddz0y9")&&m(e,"class",t),c&1&&s!==(s=a[6].selected)&&m(e,"data-attr",s),c&1&&n!==(n=a[6].d)&&m(e,"d",n),a[1]==a[6].datum.source&&a[6].selected!="not-selected"||a[1]==a[6].datum.target?o?o.p(a,c):(o=wt(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(a){a&&h(e),o&&o.d(a),a&&h(r)}}}function At(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=Lt(It(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);w(s,e,n)},p(s,n){if(n&3){l=s[3];let r;for(r=0;r<l.length;r+=1){const o=It(s,l,r);t[r]?t[r].p(o,n):(t[r]=Lt(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){ze(t,s),s&&h(e)}}}function Vl(i){let e=Object.keys(i[0]).length>0,l,t=e&&Et(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),w(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=Et(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:j,o:j,d(s){t&&t.d(s),s&&h(l)}}}function Ml(i,e,l){let t,s;return ie(i,Ue,n=>l(0,t=n)),ie(i,Je,n=>l(1,s=n)),[t,s]}class ql extends Pe{constructor(e){super(),Te(this,e,Ml,Vl,De,{})}}function Cl(i){let e,l,t,s,n,r,o,a,c,f,u;return t=new sl({props:{data:i[2],items:i[4],scrollTopVal:i[8]}}),r=new zl({props:{items:i[4],data:i[10],screenSize:i[0],essaysItems:i[6],visibleItemsID:i[5],handlePosition:i[14],updatePosition:i[13],config:Rt}}),a=new ql({}),{c(){e=N("article"),l=N("section"),he(t.$$.fragment),s=H(),n=N("section"),he(r.$$.fragment),o=H(),he(a.$$.fragment),this.h()},l(_){e=O(_,"ARTICLE",{style:!0,class:!0});var d=q(e);l=O(d,"SECTION",{class:!0});var P=q(l);pe(t.$$.fragment,P),P.forEach(h),s=J(d),n=O(d,"SECTION",{class:!0});var L=q(n);pe(r.$$.fragment,L),L.forEach(h),o=J(d),pe(a.$$.fragment,d),d.forEach(h),this.h()},h(){var _;m(l,"class","markdown__container svelte-15zdm0q"),m(n,"class","graph__container svelte-15zdm0q"),$e(e,"--theme-color",((_=i[2].meta)==null?void 0:_.color)||"blue"),m(e,"class","svelte-15zdm0q")},m(_,d){w(_,e,d),M(e,l),ge(t,l,null),i[19](l),M(e,s),M(e,n),ge(r,n,null),M(e,o),ge(a,e,null),i[26](e),c=!0,f||(u=[K(l,"wheel",i[20],{passive:!0}),K(l,"scroll",i[21]),K(n,"wheel",i[22],{passive:!0}),K(e,"resize",i[14]),K(e,"scroll",i[23]),K(e,"touchmove",i[24],{passive:!0}),K(e,"click",i[25]),K(e,"keypress",i[17])],f=!0)},p(_,d){var T;const P={};d&4&&(P.data=_[2]),d&16&&(P.items=_[4]),d&256&&(P.scrollTopVal=_[8]),t.$set(P);const L={};d&16&&(L.items=_[4]),d&1024&&(L.data=_[10]),d&1&&(L.screenSize=_[0]),d&64&&(L.essaysItems=_[6]),d&32&&(L.visibleItemsID=_[5]),r.$set(L),(!c||d&4)&&$e(e,"--theme-color",((T=_[2].meta)==null?void 0:T.color)||"blue")},i(_){c||(C(t.$$.fragment,_),C(r.$$.fragment,_),C(a.$$.fragment,_),c=!0)},o(_){U(t.$$.fragment,_),U(r.$$.fragment,_),U(a.$$.fragment,_),c=!1},d(_){_&&h(e),ve(t),i[19](null),ve(r),ve(a),i[26](null),f=!1,Oe(u)}}}function Gl(i){let e,l,t,s;return{c(){e=N("article"),l=N("section"),t=N("h4"),s=x("Loading..."),this.h()},l(n){e=O(n,"ARTICLE",{class:!0});var r=q(e);l=O(r,"SECTION",{class:!0});var o=q(l);t=O(o,"H4",{});var a=q(t);s=ee(a,"Loading..."),a.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){m(l,"class","short_text svelte-15zdm0q"),m(e,"class","svelte-15zdm0q")},m(n,r){w(n,e,r),M(e,l),M(l,t),M(t,s)},p:j,i:j,o:j,d(n){n&&h(e)}}}function Fl(i){let e,l,t,s;return{c(){e=N("article"),l=N("section"),t=N("h4"),s=x("404 Page not found"),this.h()},l(n){e=O(n,"ARTICLE",{class:!0});var r=q(e);l=O(r,"SECTION",{class:!0});var o=q(l);t=O(o,"H4",{});var a=q(t);s=ee(a,"404 Page not found"),a.forEach(h),o.forEach(h),r.forEach(h),this.h()},h(){m(l,"class","short_text svelte-15zdm0q"),m(e,"class","svelte-15zdm0q")},m(n,r){w(n,e,r),M(e,l),M(l,t),M(t,s)},p:j,i:j,o:j,d(n){n&&h(e)}}}function Nt(i){var G,$;let e,l,t,s,n,r,o,a,c,f,u,_,d,P,L,T,S,V,p,v,y,I,E,A,B,F,D,R,Q,le;return document.title=e=(($=(G=i[2])==null?void 0:G.meta)==null?void 0:$.title)||Le,{c(){l=H(),t=N("meta"),n=H(),r=N("meta"),a=H(),c=N("meta"),u=H(),_=N("meta"),P=H(),L=N("meta"),S=H(),V=N("meta"),p=H(),v=N("meta"),I=H(),E=N("meta"),B=H(),F=N("meta"),R=H(),Q=N("meta"),this.h()},l(g){l=J(g),t=O(g,"META",{name:!0,content:!0}),n=J(g),r=O(g,"META",{property:!0,content:!0}),a=J(g),c=O(g,"META",{property:!0,content:!0}),u=J(g),_=O(g,"META",{property:!0,content:!0}),P=J(g),L=O(g,"META",{property:!0,content:!0}),S=J(g),V=O(g,"META",{name:!0,content:!0}),p=J(g),v=O(g,"META",{property:!0,content:!0}),I=J(g),E=O(g,"META",{name:!0,content:!0}),B=J(g),F=O(g,"META",{name:!0,content:!0}),R=J(g),Q=O(g,"META",{name:!0,content:!0}),this.h()},h(){var g,b,k,z,Y,ne,Z,te,oe,X,ae,re,me,ye;m(t,"name","description"),m(t,"content",s=((b=(g=i[2])==null?void 0:g.meta)==null?void 0:b.description)||Ae),m(r,"property","og:url"),m(r,"content",o=i[9].url.origin),m(c,"property","og:title"),m(c,"content",f=((z=(k=i[2])==null?void 0:k.meta)==null?void 0:z.title)||Le),m(_,"property","og:description"),m(_,"content",d=((ne=(Y=i[2])==null?void 0:Y.meta)==null?void 0:ne.description)||Ae),m(L,"property","og:image"),m(L,"content",T=((te=(Z=i[2])==null?void 0:Z.meta)==null?void 0:te.cover)||Fe),m(V,"name","twitter:card"),m(V,"content","summary_large_image"),m(v,"property","twitter:url"),m(v,"content",y=i[9].url.origin),m(E,"name","twitter:title"),m(E,"content",A=((X=(oe=i[2])==null?void 0:oe.meta)==null?void 0:X.title)||Le),m(F,"name","twitter:description"),m(F,"content",D=((re=(ae=i[2])==null?void 0:ae.meta)==null?void 0:re.description)||Ae),m(Q,"name","twitter:image"),m(Q,"content",le=((ye=(me=i[2])==null?void 0:me.meta)==null?void 0:ye.cover)||Fe)},m(g,b){w(g,l,b),w(g,t,b),w(g,n,b),w(g,r,b),w(g,a,b),w(g,c,b),w(g,u,b),w(g,_,b),w(g,P,b),w(g,L,b),w(g,S,b),w(g,V,b),w(g,p,b),w(g,v,b),w(g,I,b),w(g,E,b),w(g,B,b),w(g,F,b),w(g,R,b),w(g,Q,b)},p(g,b){var k,z,Y,ne,Z,te,oe,X,ae,re,me,ye,Ve,Me,qe,Se;b&4&&e!==(e=((z=(k=g[2])==null?void 0:k.meta)==null?void 0:z.title)||Le)&&(document.title=e),b&4&&s!==(s=((ne=(Y=g[2])==null?void 0:Y.meta)==null?void 0:ne.description)||Ae)&&m(t,"content",s),b&512&&o!==(o=g[9].url.origin)&&m(r,"content",o),b&4&&f!==(f=((te=(Z=g[2])==null?void 0:Z.meta)==null?void 0:te.title)||Le)&&m(c,"content",f),b&4&&d!==(d=((X=(oe=g[2])==null?void 0:oe.meta)==null?void 0:X.description)||Ae)&&m(_,"content",d),b&4&&T!==(T=((re=(ae=g[2])==null?void 0:ae.meta)==null?void 0:re.cover)||Fe)&&m(L,"content",T),b&512&&y!==(y=g[9].url.origin)&&m(v,"content",y),b&4&&A!==(A=((ye=(me=g[2])==null?void 0:me.meta)==null?void 0:ye.title)||Le)&&m(E,"content",A),b&4&&D!==(D=((Me=(Ve=g[2])==null?void 0:Ve.meta)==null?void 0:Me.description)||Ae)&&m(F,"content",D),b&4&&le!==(le=((Se=(qe=g[2])==null?void 0:qe.meta)==null?void 0:Se.cover)||Fe)&&m(Q,"content",le)},d(g){g&&h(l),g&&h(t),g&&h(n),g&&h(r),g&&h(a),g&&h(c),g&&h(u),g&&h(_),g&&h(P),g&&h(L),g&&h(S),g&&h(V),g&&h(p),g&&h(v),g&&h(I),g&&h(E),g&&h(B),g&&h(F),g&&h(R),g&&h(Q)}}}function Bl(i){let e,l,t,s,n,r,o,a;Ft(i[18]);const c=[Fl,Gl,Cl],f=[];function u(d,P){return d[2]==null&&d[3]==null?0:d[3]==null?1:2}l=u(i),t=f[l]=c[l](i);let _=i[2]!=null&&Nt(i);return{c(){e=N("div"),t.c(),s=H(),_&&_.c(),n=W()},l(d){e=O(d,"DIV",{});var P=q(e);t.l(P),P.forEach(h),s=J(d);const L=Bt("svelte-hn2qma",document.head);_&&_.l(L),n=W(),L.forEach(h)},m(d,P){w(d,e,P),f[l].m(e,null),w(d,s,P),_&&_.m(document.head,null),M(document.head,n),r=!0,o||(a=[K(window,"resize",i[14]),K(window,"click",i[14]),K(window,"resize",i[18])],o=!0)},p(d,[P]){let L=l;l=u(d),l===L?f[l].p(d,P):(fe(),U(f[L],1,1,()=>{f[L]=null}),ce(),t=f[l],t?t.p(d,P):(t=f[l]=c[l](d),t.c()),C(t,1),t.m(e,null)),d[2]!=null?_?_.p(d,P):(_=Nt(d),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null)},i(d){r||(C(t),r=!0)},o(d){U(t),r=!1},d(d){d&&h(e),f[l].d(),d&&h(s),_&&_.d(d),h(n),o=!1,Oe(a)}}}function Ul(i,e,l){let t,s,n,r,o,a;ie(i,Xt,G=>l(9,t=G)),ie(i,xe,G=>l(10,s=G)),ie(i,Je,G=>l(16,n=G)),ie(i,We,G=>l(11,o=G)),ie(i,Ne,G=>l(12,a=G));let{data:c}=e,f,u,_=[],d,P,L=[],T=[],S,V;const p=ke(!1);ie(i,p,G=>l(27,r=G));const v=()=>{se(p,r=!0,r)};je(async()=>{l(2,_=[...c.posts].find($=>$.path.includes(t.params.slug))),l(4,P=await hl(_.text)),l(5,L=P.filter($=>!$.set).map($=>{var g;return`${_e}/resources/${(g=$.data)==null?void 0:g["o:id"]}`})),l(3,d=await Ct(P)),se(xe,s=d,s);const G=localStorage.getItem("selectedLanguage");l(6,T=c.posts.reduce(($,g)=>(!g.path.includes(t.params.slug)&&g.meta.lang==G&&g.links.map(b=>{const k=$.find(Y=>Y.id===b),z={title:g.meta.title,url:g.path};k?k.essays.some(Y=>Y.title===z.title&&Y.url===z.url)||k.essays.push(z):$.push({id:b,essays:[z]})}),$),[]))});function y(G){Be.call(this,i,G)}function I(){l(0,f=window.innerWidth)}function E(G){we[G?"unshift":"push"](()=>{u=G,l(1,u)})}const A=()=>{v(),se(Ne,a=!1,a),l(8,V=u==null?void 0:u.scrollTop)},B=()=>{f<1e3&&(v(),l(8,V=u==null?void 0:u.scrollTop),se(Ne,a=!1,a))},F=()=>{f>1e3&&se(Ne,a=!0,a)},D=()=>{se(We,o=S==null?void 0:S.scrollLeft,o)},R=()=>{se(We,o=S==null?void 0:S.scrollLeft,o),v()},Q=()=>{v()};function le(G){we[G?"unshift":"push"](()=>{S=G,l(7,S)})}return i.$$set=G=>{"data"in G&&l(15,c=G.data)},i.$$.update=()=>{i.$$.dirty&65536&&v()},[f,u,_,d,P,L,T,S,V,t,s,o,a,p,v,c,n,y,I,E,A,B,F,D,R,Q,le]}class Ql extends Pe{constructor(e){super(),Te(this,e,Ul,Bl,De,{data:15})}}export{Ql as component,Yl as universal};
