import{_ as ue}from"../chunks/preload-helper.41c905a7.js";import{S as Pe,i as Te,s as De,k as A,q as $,a as H,l as N,m as M,r as x,h as p,c as J,n as h,b as P,G as z,u as me,H as j,I as ie,o as je,R as se,L as Ge,M as K,T as Qe,N as Oe,j as Vt,U as zt,e as W,J as Ve,V as Re,W as Be,w as we,K as Xe,g as C,v as fe,d as U,f as ce,y as pe,z as ge,A as be,B as ve,X as Ie,Y as Ee,Z as He,_ as Bt,O as Ut,p as $e}from"../chunks/index.7c5e5199.js";import{b as _e,m as Wt,e as Rt,t as Le,a as Ae,i as Fe,c as Xt}from"../chunks/setup.57078eda.js";import{w as ke}from"../chunks/singletons.1b0e4ce2.js";import{p as Ht}from"../chunks/stores.6c1556c8.js";const Jt=async()=>{const e=Object.entries(Object.assign({"/src/routes/texts/01_Lipp_cultural_collection_on_fashion_en.md":()=>ue(()=>import("../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js"),["../chunks/01_Lipp_cultural_collection_on_fashion_en.26e1ba11.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/01_Lipp_cultural_collections_on_fashion_de.md":()=>ue(()=>import("../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js"),["../chunks/01_Lipp_cultural_collections_on_fashion_de.5a50583d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_de.md":()=>ue(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js"),["../chunks/02_GNM_cultural_collection_on_fashion_de.76677eff.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/02_GNM_cultural_collection_on_fashion_en.md":()=>ue(()=>import("../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js"),["../chunks/02_GNM_cultural_collection_on_fashion_en.3f324f8a.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_de.md":()=>ue(()=>import("../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js"),["../chunks/03_Fashion_costume_terminology_de.fbf24a9c.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/03_Fashion_costume_terminology_en.md":()=>ue(()=>import("../chunks/03_Fashion_costume_terminology_en.342c2110.js"),["../chunks/03_Fashion_costume_terminology_en.342c2110.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp-GNM_Werkgruppen_de.md":()=>ue(()=>import("../chunks/04_Lipp-GNM_Werkgruppen_de.3054bb9d.js"),["../chunks/04_Lipp-GNM_Werkgruppen_de.3054bb9d.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/04_Lipp_GNM_Werkgruppen_en.md":()=>ue(()=>import("../chunks/04_Lipp_GNM_Werkgruppen_en.b17de690.js"),["../chunks/04_Lipp_GNM_Werkgruppen_en.b17de690.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_de.md":()=>ue(()=>import("../chunks/05_family_portrait_de.84683c8f.js"),["../chunks/05_family_portrait_de.84683c8f.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/05_family_portrait_en.md":()=>ue(()=>import("../chunks/05_family_portrait_en.c6d2d123.js"),["../chunks/05_family_portrait_en.c6d2d123.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_de.md":()=>ue(()=>import("../chunks/06_earlymodern_images_de.3b541675.js"),["../chunks/06_earlymodern_images_de.3b541675.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/06_earlymodern_images_en.md":()=>ue(()=>import("../chunks/06_earlymodern_images_en.6c6eb206.js"),["../chunks/06_earlymodern_images_en.6c6eb206.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/99_Chronology_of_LipperheideCostumeLibrary_de.md":()=>ue(()=>import("../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js"),["../chunks/99_Chronology_of_LipperheideCostumeLibrary_de.20b3db01.js","../chunks/index.7c5e5199.js"],import.meta.url),"/src/routes/texts/template.md":()=>ue(()=>import("../chunks/template.5d8b86f5.js"),["../chunks/template.5d8b86f5.js","../chunks/index.7c5e5199.js"],import.meta.url)}));return await Promise.all(e.map(async([t,s])=>{const n=await s(),{html:r}=n.default.render(),o=t.slice(17,-3),u=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1/g,c=[...r.matchAll(u)].map(f=>f[2]).filter(f=>!f.startsWith("http")).map(f=>{const a=f.lastIndexOf("/");return a!==-1?f.substring(a+1):f});return{meta:n.metadata,path:o,text:r,links:c}}))},Yt=async({fetch:i})=>({posts:await(await i("/api/posts")).json()}),Qt=!0,Zt=async()=>(await Jt()).sort().map(l=>({slug:l.path.replaceAll("/","")})),Ql=Object.freeze(Object.defineProperty({__proto__:null,entries:Zt,load:Yt,prerender:Qt},Symbol.toStringTag,{value:"Module"})),Ze=ke(""),Je=ke(""),Ne=ke(!1),xe=ke([]),de=ke([]),Ue=ke([]),We=ke(0);function et(i){var s;let e,l=((s=i[0].meta)==null?void 0:s.description)+"",t;return{c(){e=A("div"),t=$(l),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=M(e);t=x(r,l),r.forEach(p),this.h()},h(){h(e,"class","description svelte-1nlpbc3")},m(n,r){P(n,e,r),z(e,t)},p(n,r){var o;r&1&&l!==(l=((o=n[0].meta)==null?void 0:o.description)+"")&&me(t,l)},d(n){n&&p(e)}}}function tt(i){let e,l=i[0].meta.author+"",t;return{c(){e=A("div"),t=$(l),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=M(e);t=x(n,l),n.forEach(p),this.h()},h(){h(e,"class","author svelte-1nlpbc3")},m(s,n){P(s,e,n),z(e,t)},p(s,n){n&1&&l!==(l=s[0].meta.author+"")&&me(t,l)},d(s){s&&p(e)}}}function lt(i){var n;let e,l,t=((n=new Date(i[0].meta.date))==null?void 0:n.toLocaleDateString(i[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"",s;return{c(){e=A("div"),l=A("div"),s=$(t),this.h()},l(r){e=N(r,"DIV",{class:!0});var o=M(e);l=N(o,"DIV",{class:!0});var u=M(l);s=x(u,t),u.forEach(p),o.forEach(p),this.h()},h(){h(l,"class","date svelte-1nlpbc3"),h(e,"class","date svelte-1nlpbc3")},m(r,o){P(r,e,o),z(e,l),z(l,s)},p(r,o){var u;o&1&&t!==(t=((u=new Date(r[0].meta.date))==null?void 0:u.toLocaleDateString(r[0].meta.lang,{day:"numeric",month:"long",year:"numeric"}))+"")&&me(s,t)},d(r){r&&p(e)}}}function Kt(i){var V,S,q;let e,l,t,s,n=i[0].meta.title+"",r,o,u,c,f,a,_,d=((V=i[0].meta)==null?void 0:V.description)&&et(i),y=((S=i[0].meta)==null?void 0:S.author)&&tt(i),T=((q=i[0].meta)==null?void 0:q.date)&&lt(i);return{c(){e=A("a"),l=$("← Index"),t=H(),s=A("h1"),r=$(n),o=H(),d&&d.c(),u=H(),c=A("div"),y&&y.c(),f=H(),T&&T.c(),a=H(),_=A("div"),this.h()},l(m){e=N(m,"A",{href:!0,class:!0,rel:!0});var g=M(e);l=x(g,"← Index"),g.forEach(p),t=J(m),s=N(m,"H1",{class:!0});var v=M(s);r=x(v,n),v.forEach(p),o=J(m),d&&d.l(m),u=J(m),c=N(m,"DIV",{class:!0});var I=M(c);y&&y.l(I),f=J(I),T&&T.l(I),I.forEach(p),a=J(m),_=N(m,"DIV",{class:!0});var w=M(_);w.forEach(p),this.h()},h(){h(e,"href","/"),h(e,"class","index svelte-1nlpbc3"),h(e,"rel","noopener noreferrer"),h(s,"class","svelte-1nlpbc3"),h(c,"class","metadata svelte-1nlpbc3"),h(_,"class","markdown svelte-1nlpbc3")},m(m,g){P(m,e,g),z(e,l),P(m,t,g),P(m,s,g),z(s,r),P(m,o,g),d&&d.m(m,g),P(m,u,g),P(m,c,g),y&&y.m(c,null),z(c,f),T&&T.m(c,null),P(m,a,g),P(m,_,g),_.innerHTML=i[1]},p(m,[g]){var v,I,w;g&1&&n!==(n=m[0].meta.title+"")&&me(r,n),(v=m[0].meta)!=null&&v.description?d?d.p(m,g):(d=et(m),d.c(),d.m(u.parentNode,u)):d&&(d.d(1),d=null),(I=m[0].meta)!=null&&I.author?y?y.p(m,g):(y=tt(m),y.c(),y.m(c,f)):y&&(y.d(1),y=null),(w=m[0].meta)!=null&&w.date?T?T.p(m,g):(T=lt(m),T.c(),T.m(c,null)):T&&(T.d(1),T=null)},i:j,o:j,d(m){m&&p(e),m&&p(t),m&&p(s),m&&p(o),d&&d.d(m),m&&p(u),m&&p(c),y&&y.d(),T&&T.d(),m&&p(a),m&&p(_)}}}const jt=/\[\^([^\]]+)\]/g;let $t=100;function xt(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.add("hover"),i.currentTarget.classList.add("hover")}function el(i){const e=i.currentTarget.getAttribute("data-id"),l=document.querySelector(`.node[data-id="${e}"]`);l&&l.classList.remove("hover"),i.currentTarget.classList.remove("hover")}function tl(i,e,l){const t=l-e;return(i-e)/t*100}function ll(i,e,l){const t=l-e;return e+t*i/100}function sl(i,e,l){let t,s;ie(i,Ne,m=>l(8,t=m)),ie(i,Ze,m=>l(9,s=m));let{data:n}=e,{items:r}=e,{scrollTopVal:o}=e,u=n.text,c=1;const a=u.replace(/<a\s+href="([^"]+)"[^>]*>([^<]+)<\/a>/g,(m,g,v)=>{if(g.startsWith("http"))return`<a class="external" target="_blank" href="${g}" title="${v}">${v}</a>`;{let I=g.split("/")[1];return`<a class="node-highlite" unique-id="${I}" id="${g.split("/")[1]}"
				data-id="${g.split("/")[1]}" title="${v}">${v}
				<span class="symbol node" unique-id="${I}" data-id="item_${g.split("/")[1]}"
				data-class="${r.filter(w=>w.label==v).map(w=>{var L,B;return(B=(L=w.data)==null?void 0:L["@type"])==null?void 0:B[1]})}">
					●
					</span></a>`}}).replace(jt,(m,g)=>{const v=c++;return`<sup id="fn-${v}"><a href="#fnref-${v}">${v}</a></sup><span id="fn-${v}-content">${g}</span>`}),_=Array.from({length:c-1},(m,g)=>{var w;const v=g+1,I=(w=a.match(new RegExp(`<span id="fn-${v}-content">([^<]+)</span>`)))==null?void 0:w[1];return`<li id="fnref-${v}"> ${I}</li>`}).join(""),d=`${a}
	<ol class="biblio">${_}</ol>`;let y;je(async()=>{l(4,y=document==null?void 0:document.querySelectorAll(".markdown a[data-id]")),V(y),y.forEach(m=>{m.addEventListener("mouseenter",xt),m.addEventListener("mouseleave",el),m.addEventListener("click",T)})});function T(m){y.forEach(I=>{const w=I.getAttribute("data-id"),L=document.querySelector(`.node[data-id="${w}"]`);L&&L.classList.remove("clicked"),I.classList.remove("clicked")});const g=m.currentTarget.getAttribute("data-id"),v=document.querySelector(`.node[data-id="${g}"]`);v&&v.classList.toggle("clicked"),m.currentTarget.classList.toggle("clicked"),se(Ze,s=g,s)}function V(m){let g=null;l(4,y=Array.from(m).map(v=>{let I=v.offsetTop;return g!==null&&I<=g?v.adjustedOffsetTop=g+$t:v.adjustedOffsetTop=I,g=v.adjustedOffsetTop,v}))}let S=0;function q(m,g){var v,I,w,L,B,F;if(!t){let D=(v=m==null?void 0:m[S])==null?void 0:v.adjustedOffsetTop,R=(I=m==null?void 0:m[S+1])==null?void 0:I.adjustedOffsetTop,Q=(w=m==null?void 0:m[S])==null?void 0:w.getAttribute("data-id"),le=(L=m==null?void 0:m[S+1])==null?void 0:L.getAttribute("data-id"),G=(B=document.querySelector(`.node[data-id="${Q}"]`))==null?void 0:B.offsetTop,ee=(F=document.querySelector(`.node[data-id="${le}"]`))==null?void 0:F.offsetTop,b=tl(g,D,R),k=ll(b,G,ee);g>R&&S++,g<D&&S!=0&&S--;const E=document.querySelector(".links:first-of-type");D&&R&&E&&b&&k&&(E==null||E.scrollTo({top:k}))}}return i.$$set=m=>{"data"in m&&l(0,n=m.data),"items"in m&&l(2,r=m.items),"scrollTopVal"in m&&l(3,o=m.scrollTopVal)},i.$$.update=()=>{i.$$.dirty&24&&q(y,o)},[n,d,r,o,y]}class il extends Pe{constructor(e){super(),Te(this,e,sl,Kt,De,{data:0,items:2,scrollTopVal:3})}}function st(i,e,l){const t=i.slice();return t[27]=e[l],t}function nl(i){let e,l=(i[0].title||"")+"",t;return{c(){e=A("div"),t=$(l),this.h()},l(s){e=N(s,"DIV",{class:!0});var n=M(e);t=x(n,l),n.forEach(p),this.h()},h(){h(e,"class","title svelte-x5b8hf")},m(s,n){P(s,e,n),z(e,t)},p(s,n){n&1&&l!==(l=(s[0].title||"")+"")&&me(t,l)},d(s){s&&p(e)}}}function rl(i){let e,l,t,s,n,r=(i[0].title||"")+"",o,u,c;return{c(){e=A("img"),s=H(),n=A("div"),o=$(r),this.h()},l(f){e=N(f,"IMG",{src:!0,alt:!0,class:!0}),s=J(f),n=N(f,"DIV",{class:!0});var a=M(n);o=x(a,r),a.forEach(p),this.h()},h(){Xe(e.src,l=i[5])||h(e,"src",l),h(e,"alt",t=i[0].title),h(e,"class","svelte-x5b8hf"),h(n,"class","title svelte-x5b8hf")},m(f,a){P(f,e,a),P(f,s,a),P(f,n,a),z(n,o),u||(c=K(e,"load",i[11]),u=!0)},p(f,a){a&32&&!Xe(e.src,l=f[5])&&h(e,"src",l),a&1&&t!==(t=f[0].title)&&h(e,"alt",t),a&1&&r!==(r=(f[0].title||"")+"")&&me(o,r)},d(f){f&&p(e),f&&p(s),f&&p(n),u=!1,c()}}}function ol(i){let e,l,t,s,n,r=i[0].title+"",o,u,c;return{c(){e=A("img"),s=H(),n=A("div"),o=$(r),this.h()},l(f){e=N(f,"IMG",{src:!0,alt:!0,class:!0}),s=J(f),n=N(f,"DIV",{class:!0});var a=M(n);o=x(a,r),a.forEach(p),this.h()},h(){Xe(e.src,l=i[0].img.replace("square","large"))||h(e,"src",l),h(e,"alt",t=i[0].title),h(e,"class","svelte-x5b8hf"),h(n,"class","title svelte-x5b8hf")},m(f,a){P(f,e,a),P(f,s,a),P(f,n,a),z(n,o),u||(c=K(e,"load",i[11]),u=!0)},p(f,a){a&1&&!Xe(e.src,l=f[0].img.replace("square","large"))&&h(e,"src",l),a&1&&t!==(t=f[0].title)&&h(e,"alt",t),a&1&&r!==(r=f[0].title+"")&&me(o,r)},d(f){f&&p(e),f&&p(s),f&&p(n),u=!1,c()}}}function it(i){let e,l=i[8].essays,t=[];for(let s=0;s<l.length;s+=1)t[s]=nt(st(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&256){l=s[8].essays;let r;for(r=0;r<l.length;r+=1){const o=st(s,l,r);t[r]?t[r].p(o,n):(t[r]=nt(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){Ve(t,s),s&&p(e)}}}function nt(i){let e,l,t,s=i[27].title+"",n,r;return{c(){e=A("a"),l=$("→"),t=A("em"),n=$(s),this.h()},l(o){e=N(o,"A",{class:!0,href:!0,target:!0,rel:!0});var u=M(e);l=x(u,"→"),t=N(u,"EM",{});var c=M(t);n=x(c,s),c.forEach(p),u.forEach(p),this.h()},h(){h(e,"class","link svelte-x5b8hf"),h(e,"href",r=i[27].url),h(e,"target","_blank"),h(e,"rel","noopener noreferrer")},m(o,u){P(o,e,u),z(e,l),z(e,t),z(t,n)},p(o,u){u&256&&s!==(s=o[27].title+"")&&me(n,s),u&256&&r!==(r=o[27].url)&&h(e,"href",r)},d(o){o&&p(e)}}}function rt(i){let e;function l(n,r){return n[0].type==["o:Media"]||n[0].title==null||n[0].title.length==1?ul:al}let t=l(i),s=t(i);return{c(){s.c(),e=W()},l(n){s.l(n),e=W()},m(n,r){s.m(n,r),P(n,e,r)},p(n,r){t===(t=l(n))&&s?s.p(n,r):(s.d(1),s=t(n),s&&(s.c(),s.m(e.parentNode,e)))},d(n){s.d(n),n&&p(e)}}}function al(i){let e,l,t;return{c(){e=A("a"),l=$("→ Metadata"),this.h()},l(s){e=N(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=x(n,"→ Metadata"),n.forEach(p),this.h()},h(){h(e,"class","link svelte-x5b8hf"),h(e,"href",t=`${i[3]}/item/${i[4]}`),h(e,"target","_blank"),h(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),z(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/item/${s[4]}`)&&h(e,"href",t)},d(s){s&&p(e)}}}function ul(i){let e,l,t;return{c(){e=A("a"),l=$("→ Metadata"),this.h()},l(s){e=N(s,"A",{class:!0,href:!0,target:!0,rel:!0});var n=M(e);l=x(n,"→ Metadata"),n.forEach(p),this.h()},h(){h(e,"class","link svelte-x5b8hf"),h(e,"href",t=`${i[3]}/media/${i[4]}`),h(e,"target","_blank"),h(e,"rel","noopener noreferrer")},m(s,n){P(s,e,n),z(e,l)},p(s,n){n&24&&t!==(t=`${s[3]}/media/${s[4]}`)&&h(e,"href",t)},d(s){s&&p(e)}}}function fl(i){let e,l,t,s,n,r;function o(_,d){return _[0].img?ol:_[5]?rl:nl}let u=o(i),c=u(i),f=i[8]!=null&&it(i),a=i[3]&&rt(i);return{c(){e=A("div"),c.c(),l=H(),f&&f.c(),t=H(),a&&a.c(),this.h()},l(_){e=N(_,"DIV",{class:!0,title:!0,source:!0,target:!0,"data-id":!0});var d=M(e);c.l(d),l=J(d),f&&f.l(d),t=J(d),a&&a.l(d),d.forEach(p),this.h()},h(){h(e,"class","node svelte-x5b8hf"),h(e,"title",s=i[0].title),h(e,"source",i[9]),h(e,"target",i[4]),h(e,"data-id",i[4]),Ge(e,"selected",i[7]),Ge(e,"linkToEssay",i[8]!=null)},m(_,d){P(_,e,d),c.m(e,null),z(e,l),f&&f.m(e,null),z(e,t),a&&a.m(e,null),i[21](e),n||(r=[K(e,"mouseover",i[22]),K(e,"mouseleave",function(){Qe(i[13](i[4]))&&i[13](i[4]).apply(this,arguments)}),K(e,"click",i[18]),K(e,"keydown",i[19]),K(e,"focus",i[20])],n=!0)},p(_,[d]){i=_,u===(u=o(i))&&c?c.p(i,d):(c.d(1),c=u(i),c&&(c.c(),c.m(e,l))),i[8]!=null?f?f.p(i,d):(f=it(i),f.c(),f.m(e,t)):f&&(f.d(1),f=null),i[3]?a?a.p(i,d):(a=rt(i),a.c(),a.m(e,null)):a&&(a.d(1),a=null),d&1&&s!==(s=i[0].title)&&h(e,"title",s),d&512&&h(e,"source",i[9]),d&16&&h(e,"target",i[4]),d&16&&h(e,"data-id",i[4]),d&128&&Ge(e,"selected",i[7]),d&256&&Ge(e,"linkToEssay",i[8]!=null)},i:j,o:j,d(_){_&&p(e),c.d(),f&&f.d(),a&&a.d(),i[21](null),n=!1,Oe(r)}}}function cl(i,e,l){let t,s,n,r,o,u,c=j,f=()=>(c(),c=Re(S,k=>l(17,u=k)),S),a,_=j,d=()=>(_(),_=Re(q,k=>l(24,a=k)),q),y,T;ie(i,de,k=>l(16,o=k)),ie(i,Ze,k=>l(25,y=k)),ie(i,Je,k=>l(10,T=k)),i.$$.on_destroy.push(()=>c()),i.$$.on_destroy.push(()=>_());let{datum:V}=e,{entities:S}=e;f();let{updatePosition:q}=e;d();let{essaysItems:m}=e,{site:g}=e,{openNode:v}=e,I,w=null;Vt(()=>{const k=V.source;k==`item_${y}`&&k!=w&&v(V,1),w=`item_${y}`}),zt(()=>{se(q,a=!0,a)});function L(){se(q,a=!0,a)}function B(k){var Y;const E=k.split("/"),O=u.find(ne=>ne["o:id"]==E.slice(-1)[0]);return(Y=O==null?void 0:O.thumbnail_display_urls)==null?void 0:Y.large}let F;function D(k){const E=k,O=document.querySelector(`.node-highlite[data-id="${E}"]`);O&&O.classList.add("hover"),F.classList.add("hover")}function R(k){const E=k,O=document.querySelector(`.node-highlite[data-id="${E}"]`);O&&O.classList.remove("hover"),F.classList.remove("hover")}function Q(k){Be.call(this,i,k)}function le(k){Be.call(this,i,k)}function G(k){Be.call(this,i,k)}function ee(k){we[k?"unshift":"push"](()=>{F=k,l(6,F)})}const b=()=>{se(Je,T=s,T),D(s)};return i.$$set=k=>{"datum"in k&&l(0,V=k.datum),"entities"in k&&f(l(1,S=k.entities)),"updatePosition"in k&&d(l(2,q=k.updatePosition)),"essaysItems"in k&&l(14,m=k.essaysItems),"site"in k&&l(3,g=k.site),"openNode"in k&&l(15,v=k.openNode)},i.$$.update=()=>{i.$$.dirty&131073&&u&&l(5,I=B(V.target)),i.$$.dirty&1&&l(9,t=V.source.split("/").slice(-1)[0]),i.$$.dirty&1&&l(4,s=V.target.split("/").slice(-1)[0]),i.$$.dirty&16400&&l(8,n=m.find(k=>k.id==s)),i.$$.dirty&65537&&l(7,r=o.some(k=>(k==null?void 0:k.id)==V.target))},[V,S,q,g,s,I,F,r,n,t,T,L,D,R,m,v,o,u,Q,le,G,ee,b]}class Mt extends Pe{constructor(e){super(),Te(this,e,cl,fl,De,{datum:0,entities:1,updatePosition:2,essaysItems:14,site:3,openNode:15})}}var _l=0;function dl(){return++_l}var Ke=Function("return this")();typeof Ke.__nextId!="function"&&(Ke.__nextId=dl);function qt(){return"uid-"+Ke.__nextId()}function ml(i){let e,l,t;return{c(){e=A("div"),this.h()},l(s){e=N(s,"DIV",{source:!0,target:!0}),M(e).forEach(p),this.h()},h(){h(e,"source",l=i[0].source.split("/").slice(-1)[0]),h(e,"target",t=i[0].target.split("/").slice(-1)[0])},m(s,n){P(s,e,n),i[8](e)},p(s,[n]){n&1&&l!==(l=s[0].source.split("/").slice(-1)[0])&&h(e,"source",l),n&1&&t!==(t=s[0].target.split("/").slice(-1)[0])&&h(e,"target",t)},i:j,o:j,d(s){s&&p(e),i[8](null)}}}let ot=0;function hl(i,e,l){let t,s,n,r,o=j,u=()=>(o(),o=Re(d,m=>l(5,r=m)),d),c,f;ie(i,Ue,m=>l(12,n=m)),ie(i,We,m=>l(6,c=m)),ie(i,de,m=>l(7,f=m)),i.$$.on_destroy.push(()=>o());let{datum:a}=e,{label:_}=e,{updatePosition:d}=e;u();let y,T=qt();function V(m,g=0,v){const I=m.split("/").slice(-1)[0],w=[...document.querySelectorAll(`.node[data-id="${I}"]`)],L=[];return w.forEach(B=>{const F=B.getBoundingClientRect(),D={x:F.x+c,y:F.y+g,width:F.width-g/2,height:F.height,selected:"selected"};L.push(D)}),L}function S(){delete n[T],se(d,r=!1,r);const m=V(a.source,ot),g=V(a.target,ot);y&&(y.getBoundingClientRect().x,y.getBoundingClientRect().y),m.forEach(v=>{g.forEach(I=>{let w=100;const L=v==null?void 0:v.selected;let B,F,D,R,Q;B=v.x+v.width,F=v.y,D=I.x,R=I.y,I.x<v.x||I.x==v.x?Q=I.x-w*5:I.x==v.x?Q=I.x-w*3:Q=I.x-w,a.source.includes("item_")&&(Q=I.x-w);const le=B+w,G=F,ee=I.y,b=`M${B},${F}C${le},${G} ${Q},${ee} ${D},${R}`;se(Ue,n[T]=n[T]||[],n),n[T].push({class:s,d:b,label:_,selected:L,datum:{source:a.source.split("/").at(-1),target:a.target.split("/").at(-1)},reverse:a==null?void 0:a.reverse})})})}zt(()=>{delete n[T],se(Ue,n=[],n)});function q(m){we[m?"unshift":"push"](()=>{y=m,l(2,y)})}return i.$$set=m=>{"datum"in m&&l(0,a=m.datum),"label"in m&&l(3,_=m.label),"updatePosition"in m&&u(l(1,d=m.updatePosition))},i.$$.update=()=>{i.$$.dirty&96&&S(),i.$$.dirty&128&&l(4,t=f.slice(-1)[0].id),i.$$.dirty&17&&(s=a.target==t||a.source==t?"highlite":"")},[a,d,y,_,t,r,c,f,q]}class Ct extends Pe{constructor(e){super(),Te(this,e,hl,ml,De,{datum:0,label:3,updatePosition:1})}}new TextEncoder;async function pl(i){const e=/<a\s+(?:[^>]*?\s+)?href=(["'])(.*?)\1[^>]*?>(.*?)<\/a>/g,l=[],t=[],s=[],n=[];let r;for(;r=e.exec(i);)if(!r[2].includes("http")){const m=r[3],g=r[2];g.includes("item/")&&l.push(g.split("/")[1]),g.includes("set/")&&s.push(g.split("/")[1]),g.includes("media/")&&t.push(g.split("/")[1]),n.push({label:m,id:g.split("/")[1]})}const o=Rt,c=q(l,o).map(m=>{const g=`${_e}/items?${m.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),a=q(s,o).map(m=>{const g=`${_e}/item_sets?${m.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),d=q(t,o).map(m=>{const g=`${_e}/media?${m.map(v=>`id[]=${v}`).join("&")}`;return fetch(g).then(v=>v.json())}),y=await Promise.all(c),T=await Promise.all(a),V=await Promise.all(d),S=[...y.flat(),...V.flat(),...T.flat()];for(let m=0;m<S.length;m++){const g=n.find(I=>S[m]["o:id"]==I.id),v=S[m];g.uniqueId=qt(),g.data=v}return n;function q(m,g){const v=[];for(let I=0;I<m.length;I+=g)v.push(m.slice(I,I+g));return v}}async function Gt(i){let e=[];for(let t=0;t<i.length;t++)if(i[t].data){let s=i[t].data,n=i[t].set||null,r=gl(s,n);e=[...e,...r]}return{...{nodes:e.reduce((t,s)=>(t.find(n=>n.id===s.source)||t.push({id:s.source,title:s.title}),t.find(n=>n.id===s.target)||t.push({id:s.target,title:s.title}),t),[]),links:e}}}function gl(i,e){var u;let l=[],t=`${_e}/resources/${i["o:id"]}`;e&&l.push({source:`${_e}/resources/${e.id}`,target:t,img:(u=i==null?void 0:i.thumbnail_display_urls)==null?void 0:u.large,title:i["o:title"]});let s,n=!1;const r=/\b[a-zA-Z]+\d+[a-zA-Z]*\s/;let o=async function(c){var f,a,_,d,y,T,V,S,q,m,g,v;for(let I in c)if(I==="@id"&&c[I].startsWith(_e)&&(c["o:title"]||c.display_title||n==!0)){let w=c[I].split("/").pop(),L=`${_e}/resources/${w}`;const B=c["o:title"]||c.display_title,F=(c==null?void 0:c.thumbnail_url)||((f=c==null?void 0:c.thumbnail_display_urls)==null?void 0:f.large),D=l.some(le=>le.source===t&&le.target===L);let R=((_=(a=c.property_label)==null?void 0:a.replace("_"," "))==null?void 0:_.replace(r,""))||(s==null?void 0:s.replace(r,""));const Q=Wt.map(le=>le.props.includes(R)?le.key:"").find(Boolean);D||l.push({source:t,target:L,title:B,img:F,property:R,category:Q,reverse:n})}else if(I==="@id"&&!c[I].startsWith(_e)&&c["o:label"]){let w=((y=(d=c.property_label)==null?void 0:d.replace("_"," "))==null?void 0:y.replace(r,""))||(s==null?void 0:s.replace(r,""));l.push({source:t,target:c[I],title:c["o:label"],property:w,category:"",external:!0,reverse:n})}else if(I==="@id"&&s=="media"&&t.split("/").pop()!=((T=c==null?void 0:c["o:primary_media"])==null?void 0:T["@id"].split("/").pop())){let w=((S=(V=c.property_label)==null?void 0:V.replace("_"," "))==null?void 0:S.replace(r,""))||(s==null?void 0:s.replace(r,"")),L=c[I].split("/").pop(),B=`${_e}/resources/${L}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else if(I==="@id"&&s=="item"){let w=((m=(q=c.property_label)==null?void 0:q.replace("_"," "))==null?void 0:m.replace(r,""))||(s==null?void 0:s.replace(r,"")),L=c[I].split("/").pop(),B=`${_e}/resources/${L}`;l.push({source:t,target:B,title:(c==null?void 0:c["o:label"])||" ",property:w,category:"",reverse:n})}else typeof c[I]=="object"&&(isNaN(I)&&(s=(v=(g=(I==null?void 0:I.split(":"))[1])==null?void 0:g.split("_"))==null?void 0:v.join(" "),I=="@reverse"&&(n=!0)),o(c[I]))};return o(i),l}function at(i,e,l){const t=i.slice();return t[22]=e[l],t}function ut(i){let e,l;return{c(){e=A("div"),l=$("Loading..."),this.h()},l(t){e=N(t,"DIV",{class:!0});var s=M(e);l=x(s,"Loading..."),s.forEach(p),this.h()},h(){h(e,"class","loading svelte-1kyenid")},m(t,s){P(t,e,s),z(e,l)},d(t){t&&p(e)}}}function ft(i){let e,l,t=i[0],s=[];for(let r=0;r<t.length;r+=1)s[r]=_t(at(i,t,r));const n=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let u=0;u<s.length;u+=1)s[u].m(r,o);P(r,e,o),l=!0},p(r,o){if(o&639){t=r[0];let u;for(u=0;u<t.length;u+=1){const c=at(r,t,u);s[u]?(s[u].p(c,o),C(s[u],1)):(s[u]=_t(c),s[u].c(),C(s[u],1),s[u].m(e.parentNode,e))}for(fe(),u=t.length;u<s.length;u+=1)n(u);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)C(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);l=!1},d(r){Ve(s,r),r&&p(e)}}}function bl(i){var t;let e,l;return e=new Ct({props:{datum:i[22],updatePosition:i[3],label:((t=i[22])==null?void 0:t.property)||""}}),{c(){pe(e.$$.fragment)},l(s){ge(e.$$.fragment,s)},m(s,n){be(e,s,n),l=!0},p(s,n){var o;const r={};n&1&&(r.datum=s[22]),n&8&&(r.updatePosition=s[3]),n&1&&(r.label=((o=s[22])==null?void 0:o.property)||""),e.$set(r)},i(s){l||(C(e.$$.fragment,s),l=!0)},o(s){U(e.$$.fragment,s),l=!1},d(s){ve(e,s)}}}function vl(i){let e,l,t=i[22].source!=i[22].target&&ct(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[22].source!=s[22].target?t?(t.p(s,n),n&1&&C(t,1)):(t=ct(s),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(C(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&p(e)}}}function ct(i){var c;let e,l,t,s,n;const r=[yl,kl],o=[];function u(f,a){var _;return(_=f[22])!=null&&_.external?1:0}return e=u(i),l=o[e]=r[e](i),s=new Ct({props:{datum:i[22],updatePosition:i[3],label:((c=i[22])==null?void 0:c.property)||""}}),{c(){l.c(),t=H(),pe(s.$$.fragment)},l(f){l.l(f),t=J(f),ge(s.$$.fragment,f)},m(f,a){o[e].m(f,a),P(f,t,a),be(s,f,a),n=!0},p(f,a){var y;let _=e;e=u(f),e===_?o[e].p(f,a):(fe(),U(o[_],1,1,()=>{o[_]=null}),ce(),l=o[e],l?l.p(f,a):(l=o[e]=r[e](f),l.c()),C(l,1),l.m(t.parentNode,t));const d={};a&1&&(d.datum=f[22]),a&8&&(d.updatePosition=f[3]),a&1&&(d.label=((y=f[22])==null?void 0:y.property)||""),s.$set(d)},i(f){n||(C(l),C(s.$$.fragment,f),n=!0)},o(f){U(l),U(s.$$.fragment,f),n=!1},d(f){o[e].d(f),f&&p(t),ve(s,f)}}}function kl(i){let e,l,t,s;return l=new Mt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),{c(){e=A("a"),pe(l.$$.fragment),this.h()},l(n){e=N(n,"A",{href:!0,target:!0,rel:!0});var r=M(e);ge(l.$$.fragment,r),r.forEach(p),this.h()},h(){h(e,"href",t=i[22].target),h(e,"target","_blank"),h(e,"rel","noreferrer")},m(n,r){P(n,e,r),be(l,e,null),s=!0},p(n,r){const o={};r&64&&(o.site=n[6]),r&4&&(o.entities=n[2]),r&8&&(o.updatePosition=n[3]),r&1&&(o.datum=n[22]),r&32&&(o.essaysItems=n[5]),l.$set(o),(!s||r&1&&t!==(t=n[22].target))&&h(e,"href",t)},i(n){s||(C(l.$$.fragment,n),s=!0)},o(n){U(l.$$.fragment,n),s=!1},d(n){n&&p(e),ve(l)}}}function yl(i){let e,l;function t(){return i[16](i[22])}function s(){return i[17](i[22])}return e=new Mt({props:{site:i[6],entities:i[2],updatePosition:i[3],datum:i[22],essaysItems:i[5],openNode:i[9]}}),e.$on("click",t),e.$on("keydown",s),{c(){pe(e.$$.fragment)},l(n){ge(e.$$.fragment,n)},m(n,r){be(e,n,r),l=!0},p(n,r){i=n;const o={};r&64&&(o.site=i[6]),r&4&&(o.entities=i[2]),r&8&&(o.updatePosition=i[3]),r&1&&(o.datum=i[22]),r&32&&(o.essaysItems=i[5]),e.$set(o)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){U(e.$$.fragment,n),l=!1},d(n){ve(e,n)}}}function _t(i){let e,l,t,s,n;function r(...f){return i[15](i[22],...f)}const o=[vl,bl],u=[];function c(f,a){return a&3&&(e=null),e==null&&(e=!!f[1].some(r)),e?0:f[22].source&&f[22].target&&f[22].source!=f[22].target?1:-1}return~(l=c(i,-1))&&(t=u[l]=o[l](i)),{c(){t&&t.c(),s=W()},l(f){t&&t.l(f),s=W()},m(f,a){~l&&u[l].m(f,a),P(f,s,a),n=!0},p(f,a){i=f;let _=l;l=c(i,a),l===_?~l&&u[l].p(i,a):(t&&(fe(),U(u[_],1,1,()=>{u[_]=null}),ce()),~l?(t=u[l],t?t.p(i,a):(t=u[l]=o[l](i),t.c()),C(t,1),t.m(s.parentNode,s)):t=null)},i(f){n||(C(t),n=!0)},o(f){U(t),n=!1},d(f){~l&&u[l].d(f),f&&p(s)}}}function Il(i){let e,l,t,s=i[0]&&typeof i[0]=="object"&&Object.keys(i[0]).length>0,n,r=i[8]&&ut(),o=s&&ft(i);return{c(){e=A("section"),r&&r.c(),l=H(),t=A("div"),o&&o.c()},l(u){e=N(u,"SECTION",{});var c=M(e);r&&r.l(c),l=J(c),t=N(c,"DIV",{});var f=M(t);o&&o.l(f),f.forEach(p),c.forEach(p)},m(u,c){P(u,e,c),r&&r.m(e,null),z(e,l),z(e,t),o&&o.m(t,null),i[18](e),n=!0},p(u,[c]){u[8]?r||(r=ut(),r.c(),r.m(e,l)):r&&(r.d(1),r=null),c&1&&(s=u[0]&&typeof u[0]=="object"&&Object.keys(u[0]).length>0),s?o?(o.p(u,c),c&1&&C(o,1)):(o=ft(u),o.c(),C(o,1),o.m(t,null)):o&&(fe(),U(o,1,1,()=>{o=null}),ce())},i(u){n||(C(o),n=!0)},o(u){U(o),n=!1},d(u){u&&p(e),r&&r.d(),o&&o.d(),i[18](null)}}}function El(i){let e=document.querySelector(`#col_${i}`);e&&e.scrollTo({top:0,behavior:"smooth"})}function wl(i,e){return e.filter(l=>!i.some(t=>t.target===l.target||t.id===l.target))}function Pl(i,e,l){let t,s=j,n=()=>(s(),s=Re(_,D=>l(20,t=D)),_),r;ie(i,de,D=>l(21,r=D)),i.$$.on_destroy.push(()=>s());let{category:o}=e,{data:u}=e,{newData:c}=e,{dataLen:f}=e,{entities:a}=e,{updatePosition:_}=e;n();let{index:d}=e,{loadData:y}=e,{defaultNodes:T}=e,{batchSize:V}=e,{essaysItems:S}=e,{site:q}=e,m,g,v={nodes:[],links:[]};async function I(D,R){El(R),l(8,g=!0),r.splice(R,r.length-R);let Q=r.map(E=>E.data).flat();const G=await(await fetch(D.target)).json();if(G!=null&&G["o:items"]&&r.length==1){let E=[];const O=G["o:items"]["@id"];(await(await fetch(O)).json()).forEach(te=>{E.push(te)});let Z=E.map(te=>({"o:title":te["o:title"],"@id":te["@id"],thumbnail_display_urls:te.thumbnail_display_urls}));G.related={...Z}}v=await Gt([{data:G}]);let ee=v.links.filter(E=>E.source===D.target||E.target===D.target),b=wl([...T,...Q],ee),k=ee.slice(0,V);se(de,r[R]={id:D.target,data:ee.sort((E,O)=>{if(E.property)return E.property.localeCompare(O.property)}),page:0,new:b,paginate:k},r),l(8,g=!1),b.length>0&&y(k,V),se(_,t=!0,t)}const w=(D,R)=>(R==null?void 0:R.title)===D.title,L=D=>{I(D,d+1)},B=D=>{I(D,d+1)};function F(D){we[D?"unshift":"push"](()=>{m=D,l(7,m)})}return i.$$set=D=>{"category"in D&&l(10,o=D.category),"data"in D&&l(0,u=D.data),"newData"in D&&l(1,c=D.newData),"dataLen"in D&&l(11,f=D.dataLen),"entities"in D&&l(2,a=D.entities),"updatePosition"in D&&n(l(3,_=D.updatePosition)),"index"in D&&l(4,d=D.index),"loadData"in D&&l(12,y=D.loadData),"defaultNodes"in D&&l(13,T=D.defaultNodes),"batchSize"in D&&l(14,V=D.batchSize),"essaysItems"in D&&l(5,S=D.essaysItems),"site"in D&&l(6,q=D.site)},[u,c,a,_,d,S,q,m,g,I,o,f,y,T,V,w,L,B,F]}class Ft extends Pe{constructor(e){super(),Te(this,e,Pl,Il,De,{category:10,data:0,newData:1,dataLen:11,entities:2,updatePosition:3,index:4,loadData:12,defaultNodes:13,batchSize:14,essaysItems:5,site:6})}}function dt(i,e,l){const t=i.slice();return t[32]=e[l],t[34]=l,t}function Ye(i){const e=i.slice(),l=e[32].paginate.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property)));e[35]=l;const t=e[32].data.filter(s=>!e[3].mainCategories.some(n=>n.props.includes(s.property))).length;return e[36]=t,e}function mt(i,e,l){const t=i.slice();t[37]=e[l];const s=t[32].paginate.filter(function(...o){return i[20](t[37],...o)});t[38]=s;const n=t[32].data.filter(function(...o){return i[21](t[37],...o)}).length;return t[36]=n,t}function Tl(i){let e,l,t=i[5],s=[];for(let r=0;r<t.length;r+=1)s[r]=kt(dt(i,t,r));const n=r=>U(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=W()},l(r){for(let o=0;o<s.length;o+=1)s[o].l(r);e=W()},m(r,o){for(let u=0;u<s.length;u+=1)s[u].m(r,o);P(r,e,o),l=!0},p(r,o){if(o[0]&16063){t=r[5];let u;for(u=0;u<t.length;u+=1){const c=dt(r,t,u);s[u]?(s[u].p(c,o),C(s[u],1)):(s[u]=kt(c),s[u].c(),C(s[u],1),s[u].m(e.parentNode,e))}for(fe(),u=t.length;u<s.length;u+=1)n(u);ce()}},i(r){if(!l){for(let o=0;o<t.length;o+=1)C(s[o]);l=!0}},o(r){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)U(s[o]);l=!1},d(r){Ve(s,r),r&&p(e)}}}function Dl(i){let e,l,t;return{c(){e=A("div"),l=A("h4"),t=$("Loading Graph..."),this.h()},l(s){e=N(s,"DIV",{});var n=M(e);l=N(n,"H4",{class:!0});var r=M(l);t=x(r,"Loading Graph..."),r.forEach(p),n.forEach(p),this.h()},h(){h(l,"class","loading svelte-d0zru6")},m(s,n){P(s,e,n),z(e,l),z(l,t)},p:j,i:j,o:j,d(s){s&&p(e)}}}function Sl(i){let e,l;return{c(){e=A("div"),l=$("There are no connections."),this.h()},l(t){e=N(t,"DIV",{class:!0});var s=M(e);l=x(s,"There are no connections."),s.forEach(p),this.h()},h(){h(e,"class","no-items svelte-d0zru6")},m(t,s){P(t,e,s),z(e,l)},p:j,i:j,o:j,d(t){t&&p(e)}}}function Ll(i){let e,l,t=i[32].paginate.filter(i[19]).length>0,s,n,r=i[3].mainCategories,o=[];for(let a=0;a<r.length;a+=1)o[a]=pt(mt(i,r,a));const u=a=>U(o[a],1,1,()=>{o[a]=null});let c=t&&gt(Ye(i)),f=i[32].paginate.length<i[32].new.length&&vt(i);return{c(){e=A("div");for(let a=0;a<o.length;a+=1)o[a].c();l=H(),c&&c.c(),s=H(),f&&f.c()},l(a){e=N(a,"DIV",{});var _=M(e);for(let d=0;d<o.length;d+=1)o[d].l(_);l=J(_),c&&c.l(_),s=J(_),f&&f.l(_),_.forEach(p)},m(a,_){P(a,e,_);for(let d=0;d<o.length;d+=1)o[d].m(e,null);z(e,l),c&&c.m(e,null),z(e,s),f&&f.m(e,null),n=!0},p(a,_){if(_[0]&7725){r=a[3].mainCategories;let d;for(d=0;d<r.length;d+=1){const y=mt(a,r,d);o[d]?(o[d].p(y,_),C(o[d],1)):(o[d]=pt(y),o[d].c(),C(o[d],1),o[d].m(e,l))}for(fe(),d=r.length;d<o.length;d+=1)u(d);ce()}_[0]&40&&(t=a[32].paginate.filter(a[19]).length>0),t?c?(c.p(Ye(a),_),_[0]&40&&C(c,1)):(c=gt(Ye(a)),c.c(),C(c,1),c.m(e,s)):c&&(fe(),U(c,1,1,()=>{c=null}),ce()),a[32].paginate.length<a[32].new.length?f?f.p(a,_):(f=vt(a),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i(a){if(!n){for(let _=0;_<r.length;_+=1)C(o[_]);C(c),n=!0}},o(a){o=o.filter(Boolean);for(let _=0;_<o.length;_+=1)U(o[_]);U(c),n=!1},d(a){a&&p(e),Ve(o,a),c&&c.d(),f&&f.d()}}}function ht(i){let e,l;return e=new Ft({props:{site:i[3].publicSite,essaysItems:i[2],category:i[37].key,data:i[38],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&8&&(n.category=t[37].key),s[0]&40&&(n.data=t[38]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function pt(i){let e,l,t=i[38].length>0&&ht(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[38].length>0?t?(t.p(s,n),n[0]&40&&C(t,1)):(t=ht(s),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(C(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&p(e)}}}function gt(i){let e,l,t=i[35].length>0&&bt(i);return{c(){t&&t.c(),e=W()},l(s){t&&t.l(s),e=W()},m(s,n){t&&t.m(s,n),P(s,e,n),l=!0},p(s,n){s[35].length>0?t?(t.p(s,n),n[0]&40&&C(t,1)):(t=bt(s),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(fe(),U(t,1,1,()=>{t=null}),ce())},i(s){l||(C(t),l=!0)},o(s){U(t),l=!1},d(s){t&&t.d(s),s&&p(e)}}}function bt(i){let e,l;return e=new Ft({props:{site:i[3].publicSite,essaysItems:i[2],category:"",data:i[35],newData:i[32].new,dataLen:i[36],index:i[34],entities:i[9],updatePosition:i[0],batchSize:i[10],defaultNodes:[...i[11]],loadData:i[12]}}),{c(){pe(e.$$.fragment)},l(t){ge(e.$$.fragment,t)},m(t,s){be(e,t,s),l=!0},p(t,s){const n={};s[0]&8&&(n.site=t[3].publicSite),s[0]&4&&(n.essaysItems=t[2]),s[0]&40&&(n.data=t[35]),s[0]&32&&(n.newData=t[32].new),s[0]&40&&(n.dataLen=t[36]),s[0]&1&&(n.updatePosition=t[0]),e.$set(n)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){ve(e,t)}}}function vt(i){let e,l,t,s;return{c(){e=A("div"),l=$("Load more"),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=M(e);l=x(r,"Load more"),r.forEach(p),this.h()},h(){h(e,"class","more svelte-d0zru6")},m(n,r){P(n,e,r),z(e,l),t||(s=[K(e,"click",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)}),K(e,"keydown",function(){Qe(i[13](i[34],i[7]))&&i[13](i[34],i[7]).apply(this,arguments)})],t=!0)},p(n,r){i=n},d(n){n&&p(e),t=!1,Oe(s)}}}function kt(i){let e,l,t,s,n,r,o;const u=[Ll,Sl],c=[];function f(a,_){var d,y;return(d=a[32])!=null&&d.new&&((y=a[32])==null?void 0:y.new.length)>0?0:1}return l=f(i),t=c[l]=u[l](i),{c(){e=A("div"),t.c(),s=H(),this.h()},l(a){e=N(a,"DIV",{class:!0,id:!0});var _=M(e);t.l(_),s=J(_),_.forEach(p),this.h()},h(){h(e,"class","links svelte-d0zru6"),h(e,"id","col_"+i[34])},m(a,_){P(a,e,_),c[l].m(e,null),z(e,s),i[22](e),n=!0,r||(o=[K(e,"scroll",i[23]),K(e,"click",i[24]),K(e,"keypress",i[25])],r=!0)},p(a,_){let d=l;l=f(a),l===d?c[l].p(a,_):(fe(),U(c[d],1,1,()=>{c[d]=null}),ce(),t=c[l],t?t.p(a,_):(t=c[l]=u[l](a),t.c()),C(t,1),t.m(e,s))},i(a){n||(C(t),n=!0)},o(a){U(t),n=!1},d(a){a&&p(e),c[l].d(),i[22](null),r=!1,Oe(o)}}}function yt(i){let e,l,t,s;return{c(){e=A("div"),l=$("✕"),this.h()},l(n){e=N(n,"DIV",{class:!0});var r=M(e);l=x(r,"✕"),r.forEach(p),this.h()},h(){h(e,"class","close svelte-d0zru6")},m(n,r){P(n,e,r),z(e,l),t||(s=[K(e,"click",i[27]),K(e,"keypress",i[28])],t=!0)},p:j,d(n){n&&p(e),t=!1,Oe(s)}}}function Al(i){let e,l,t,s,n,r;const o=[Dl,Tl],u=[];function c(a,_){return a[8].length==0?0:1}l=c(i),t=u[l]=o[l](i);let f=i[5].length>1&&yt(i);return{c(){e=A("div"),t.c(),s=H(),f&&f.c(),n=W(),this.h()},l(a){e=N(a,"DIV",{class:!0});var _=M(e);t.l(_),_.forEach(p),s=J(a),f&&f.l(a),n=W(),this.h()},h(){h(e,"class","graph svelte-d0zru6")},m(a,_){P(a,e,_),u[l].m(e,null),i[26](e),P(a,s,_),f&&f.m(a,_),P(a,n,_),r=!0},p(a,_){let d=l;l=c(a),l===d?u[l].p(a,_):(fe(),U(u[d],1,1,()=>{u[d]=null}),ce(),t=u[l],t?t.p(a,_):(t=u[l]=o[l](a),t.c()),C(t,1),t.m(e,null)),a[5].length>1?f?f.p(a,_):(f=yt(a),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null)},i(a){r||(C(t),r=!0)},o(a){U(t),r=!1},d(a){a&&p(e),u[l].d(),i[26](null),a&&p(s),f&&f.d(a),a&&p(n)}}}function Nl(i,e,l){const t=l-e;return(i-e)/t*100}function Ol(i,e,l){const t=l-e;return e+t*i/100}function Vl(i,e,l){let t,s,n,r;ie(i,Ne,E=>l(30,s=E)),ie(i,de,E=>l(5,n=E));let{updatePosition:o}=e,{handlePosition:u}=e,{data:c}=e,{visibleItemsID:f}=e,{essaysItems:a}=e,{config:_}=e,{items:d}=e,{screenSize:y}=e,T;const V=ke([]);ie(i,V,E=>l(8,r=E));let S=_.batch,q,m=c.nodes.filter(E=>f.includes(E.id));je(async()=>{g(c.nodes,S)}),Vt(()=>{q.lastElementChild&&y>600&&q.lastElementChild.scrollIntoView({behavior:"smooth",block:"end"}),u()});async function g(E,O){const Y=E.map(Z=>{var oe,X;return(((oe=Z==null?void 0:Z.id)==null?void 0:oe.split("/"))||((X=Z==null?void 0:Z.target)==null?void 0:X.split("/"))).slice(-1)[0]}),ne=Math.ceil(Y.length/O);for(let Z=0;Z<ne;Z++){const te=Y.slice(Z*O,(Z+1)*O);let oe=`${_.api}/items?${te.map(re=>`id[]=${re}`).join("&")}`,X=await fetch(oe),ae=await X.json();V.update(re=>(re.includes(...ae)||re.push(...ae),re)),ae.length!=te.length&&(oe=`${_.api}/media?${te.map(re=>`id[]=${re}`).join("&")}`,X=await fetch(oe),ae=await X.json(),V.update(re=>(re.includes(...ae)||re.push(...ae),re)))}}let v;const I=(E,O)=>{var Y,ne,Z,te,oe;if(O!=null){const X=((Y=n[E])==null?void 0:Y.page)+1||0;se(de,n[E]={...n[E],page:X,paginate:(ne=n[E])==null?void 0:ne.data.slice(0,X*S)},n),(Z=n[E])!=null&&Z.data&&((te=n[E])==null?void 0:te.paginate.length)!=((oe=n[E])==null?void 0:oe.data.length)&&g(n[E].paginate.slice(-S),S)}};let w=0;function L(E){var O,Y,ne,Z,te,oe;if(s){const X=document.querySelectorAll(".links:first-of-type .node");let ae=(O=X==null?void 0:X[w])==null?void 0:O.offsetTop,re=(Y=X==null?void 0:X[w])==null?void 0:Y.getAttribute("data-id"),he=(ne=X==null?void 0:X[w+1])==null?void 0:ne.offsetTop,ye=(Z=X==null?void 0:X[w+1])==null?void 0:Z.getAttribute("data-id"),ze=(te=document.querySelector(`.node-highlite[data-id="${re}"]`))==null?void 0:te.offsetTop,Me=(oe=document.querySelector(`.node-highlite[data-id="${ye}"]`))==null?void 0:oe.offsetTop,qe=Nl(E,ae,he),Se=Ol(qe,ze,Me);const Ce=document.querySelector(".markdown__container");E>he&&w++,E<ae&&w!=0&&w--,Ce&&Se&&ae!==he&&Se>0&&(Ce==null||Ce.scrollTo({top:Se}))}}const B=E=>!_.mainCategories.some(O=>O.props.includes(E.property)),F=(E,O)=>E.props.includes(O.property),D=(E,O)=>E.props.includes(O.property);function R(E){we[E?"unshift":"push"](()=>{v=E,l(7,v)})}const Q=()=>{let E=document.querySelector("#col_0");E.addEventListener("scroll",O=>{l(4,T=E==null?void 0:E.scrollTop)}),u()},le=()=>{u()},G=()=>{u()};function ee(E){we[E?"unshift":"push"](()=>{q=E,l(6,q)})}const b=()=>{se(de,n=[],n),u()},k=()=>{se(de,n=[],n)};return i.$$set=E=>{"updatePosition"in E&&l(0,o=E.updatePosition),"handlePosition"in E&&l(1,u=E.handlePosition),"data"in E&&l(14,c=E.data),"visibleItemsID"in E&&l(15,f=E.visibleItemsID),"essaysItems"in E&&l(2,a=E.essaysItems),"config"in E&&l(3,_=E.config),"items"in E&&l(16,d=E.items),"screenSize"in E&&l(17,y=E.screenSize)},i.$$.update=()=>{var E;i.$$.dirty[0]&65544&&l(18,t=d.filter(O=>O==null?void 0:O.data).map(O=>{var Y,ne;return{type:O.data["@type"],img:(Y=O.data)==null?void 0:Y.thumbnail_display_urls.large,source:`item_${O.id}`,target:`${_.api}/resources/${O.id}`,title:((ne=O.data)==null?void 0:ne["o:title"])||""}})),i.$$.dirty[0]&262176&&(n&&n.length==0||de&&((E=n==null?void 0:n[0])==null?void 0:E.data.length)==0)&&se(de,n[0]={data:t,new:t,page:0,paginate:t},n),i.$$.dirty[0]&16&&L(T)},[o,u,a,_,T,n,q,v,r,V,S,m,g,I,c,f,d,y,t,B,F,D,R,Q,le,G,ee,b,k]}class zl extends Pe{constructor(e){super(),Te(this,e,Vl,Al,De,{updatePosition:0,handlePosition:1,data:14,visibleItemsID:15,essaysItems:2,config:3,items:16,screenSize:17},null,[-1,-1])}}function It(i,e,l){const t=i.slice();return t[2]=e[l][0],t[3]=e[l][1],t}function Et(i,e,l){const t=i.slice();return t[6]=e[l],t}function wt(i){let e,l,t=Object.entries(i[0]),s=[];for(let n=0;n<t.length;n+=1)s[n]=Nt(It(i,t,n));return{c(){e=Ie("svg"),l=Ie("g");for(let n=0;n<s.length;n+=1)s[n].c();this.h()},l(n){e=Ee(n,"svg",{class:!0});var r=M(e);l=Ee(r,"g",{});var o=M(l);for(let u=0;u<s.length;u+=1)s[u].l(o);o.forEach(p),r.forEach(p),this.h()},h(){h(e,"class","svelte-1ddz0y9")},m(n,r){P(n,e,r),z(e,l);for(let o=0;o<s.length;o+=1)s[o].m(l,null)},p(n,r){if(r&3){t=Object.entries(n[0]);let o;for(o=0;o<t.length;o+=1){const u=It(n,t,o);s[o]?s[o].p(u,r):(s[o]=Nt(u),s[o].c(),s[o].m(l,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=t.length}},d(n){n&&p(e),Ve(s,n)}}}function Pt(i){let e,l,t=i[6].label+"",s,n,r,o,u,c,f,a,_=i[6].label+"",d,y,T,V,S,q,m=i[6].reverse&&i[6].label&&Tt(),g=!i[6].reverse&&i[6].label&&Dt(),v=i[6].reverse&&i[6].label&&St(),I=!i[6].reverse&&i[6].label&&Lt();return{c(){e=Ie("text"),l=Ie("textPath"),s=$(t),m&&m.c(),n=W(),g&&g.c(),f=Ie("text"),a=Ie("textPath"),d=$(_),v&&v.c(),y=W(),I&&I.c(),this.h()},l(w){e=Ee(w,"text",{class:!0,source:!0,target:!0});var L=M(e);l=Ee(L,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var B=M(l);s=x(B,t),m&&m.l(B),n=W(),g&&g.l(B),B.forEach(p),L.forEach(p),f=Ee(w,"text",{class:!0,source:!0,target:!0});var F=M(f);a=Ee(F,"textPath",{"alignment-baseline":!0,href:!0,startOffset:!0,"text-anchor":!0});var D=M(a);d=x(D,_),v&&v.l(D),y=W(),I&&I.l(D),D.forEach(p),F.forEach(p),this.h()},h(){h(l,"alignment-baseline","middle"),h(l,"href",r="#path_"+i[2]),h(l,"startOffset","99%"),h(l,"text-anchor","end"),h(e,"class",o="background "+i[6].class+" svelte-1ddz0y9"),h(e,"source",u=i[6].datum.source),h(e,"target",c=i[6].datum.target),h(a,"alignment-baseline","middle"),h(a,"href",T="#path_"+i[2]),h(a,"startOffset","99%"),h(a,"text-anchor","end"),h(f,"class",V=He(i[6].class)+" svelte-1ddz0y9"),h(f,"source",S=i[6].datum.source),h(f,"target",q=i[6].datum.target)},m(w,L){P(w,e,L),z(e,l),z(l,s),m&&m.m(l,null),z(l,n),g&&g.m(l,null),P(w,f,L),z(f,a),z(a,d),v&&v.m(a,null),z(a,y),I&&I.m(a,null)},p(w,L){L&1&&t!==(t=w[6].label+"")&&me(s,t),w[6].reverse&&w[6].label?m||(m=Tt(),m.c(),m.m(l,n)):m&&(m.d(1),m=null),!w[6].reverse&&w[6].label?g||(g=Dt(),g.c(),g.m(l,null)):g&&(g.d(1),g=null),L&1&&r!==(r="#path_"+w[2])&&h(l,"href",r),L&1&&o!==(o="background "+w[6].class+" svelte-1ddz0y9")&&h(e,"class",o),L&1&&u!==(u=w[6].datum.source)&&h(e,"source",u),L&1&&c!==(c=w[6].datum.target)&&h(e,"target",c),L&1&&_!==(_=w[6].label+"")&&me(d,_),w[6].reverse&&w[6].label?v||(v=St(),v.c(),v.m(a,y)):v&&(v.d(1),v=null),!w[6].reverse&&w[6].label?I||(I=Lt(),I.c(),I.m(a,null)):I&&(I.d(1),I=null),L&1&&T!==(T="#path_"+w[2])&&h(a,"href",T),L&1&&V!==(V=He(w[6].class)+" svelte-1ddz0y9")&&h(f,"class",V),L&1&&S!==(S=w[6].datum.source)&&h(f,"source",S),L&1&&q!==(q=w[6].datum.target)&&h(f,"target",q)},d(w){w&&p(e),m&&m.d(),g&&g.d(),w&&p(f),v&&v.d(),I&&I.d()}}}function Tt(i){let e;return{c(){e=$(" -")},l(l){e=x(l," -")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function Dt(i){let e;return{c(){e=$("→")},l(l){e=x(l,"→")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function St(i){let e;return{c(){e=$("←")},l(l){e=x(l,"←")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function Lt(i){let e;return{c(){e=$("→")},l(l){e=x(l,"→")},m(l,t){P(l,e,t)},d(l){l&&p(e)}}}function At(i){let e,l,t,s,n,r,o=(i[1]==i[6].datum.source&&i[6].selected!="not-selected"||i[1]==i[6].datum.target)&&Pt(i);return{c(){e=Ie("path"),o&&o.c(),r=W(),this.h()},l(u){e=Ee(u,"path",{id:!0,class:!0,"data-attr":!0,d:!0}),M(e).forEach(p),o&&o.l(u),r=W(),this.h()},h(){h(e,"id",l="path_"+i[2]),h(e,"class",t=He(i[6].class)+" svelte-1ddz0y9"),h(e,"data-attr",s=i[6].selected),h(e,"d",n=i[6].d)},m(u,c){P(u,e,c),o&&o.m(u,c),P(u,r,c)},p(u,c){c&1&&l!==(l="path_"+u[2])&&h(e,"id",l),c&1&&t!==(t=He(u[6].class)+" svelte-1ddz0y9")&&h(e,"class",t),c&1&&s!==(s=u[6].selected)&&h(e,"data-attr",s),c&1&&n!==(n=u[6].d)&&h(e,"d",n),u[1]==u[6].datum.source&&u[6].selected!="not-selected"||u[1]==u[6].datum.target?o?o.p(u,c):(o=Pt(u),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(u){u&&p(e),o&&o.d(u),u&&p(r)}}}function Nt(i){let e,l=i[3],t=[];for(let s=0;s<l.length;s+=1)t[s]=At(Et(i,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=W()},l(s){for(let n=0;n<t.length;n+=1)t[n].l(s);e=W()},m(s,n){for(let r=0;r<t.length;r+=1)t[r].m(s,n);P(s,e,n)},p(s,n){if(n&3){l=s[3];let r;for(r=0;r<l.length;r+=1){const o=Et(s,l,r);t[r]?t[r].p(o,n):(t[r]=At(o),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(s){Ve(t,s),s&&p(e)}}}function Ml(i){let e=Object.keys(i[0]).length>0,l,t=e&&wt(i);return{c(){t&&t.c(),l=W()},l(s){t&&t.l(s),l=W()},m(s,n){t&&t.m(s,n),P(s,l,n)},p(s,[n]){n&1&&(e=Object.keys(s[0]).length>0),e?t?t.p(s,n):(t=wt(s),t.c(),t.m(l.parentNode,l)):t&&(t.d(1),t=null)},i:j,o:j,d(s){t&&t.d(s),s&&p(l)}}}function ql(i,e,l){let t,s;return ie(i,Ue,n=>l(0,t=n)),ie(i,Je,n=>l(1,s=n)),[t,s]}class Cl extends Pe{constructor(e){super(),Te(this,e,ql,Ml,De,{})}}function Gl(i){let e,l,t,s,n,r,o,u,c,f,a;return t=new il({props:{data:i[2],items:i[4],scrollTopVal:i[8]}}),r=new zl({props:{items:i[4],data:i[10],screenSize:i[0],essaysItems:i[6],visibleItemsID:i[5],handlePosition:i[14],updatePosition:i[13],config:Xt}}),u=new Cl({}),{c(){e=A("article"),l=A("section"),pe(t.$$.fragment),s=H(),n=A("section"),pe(r.$$.fragment),o=H(),pe(u.$$.fragment),this.h()},l(_){e=N(_,"ARTICLE",{style:!0,class:!0});var d=M(e);l=N(d,"SECTION",{class:!0});var y=M(l);ge(t.$$.fragment,y),y.forEach(p),s=J(d),n=N(d,"SECTION",{class:!0});var T=M(n);ge(r.$$.fragment,T),T.forEach(p),o=J(d),ge(u.$$.fragment,d),d.forEach(p),this.h()},h(){var _;h(l,"class","markdown__container svelte-15zdm0q"),h(n,"class","graph__container svelte-15zdm0q"),$e(e,"--theme-color",((_=i[2].meta)==null?void 0:_.color)||"blue"),h(e,"class","svelte-15zdm0q")},m(_,d){P(_,e,d),z(e,l),be(t,l,null),i[19](l),z(e,s),z(e,n),be(r,n,null),z(e,o),be(u,e,null),i[26](e),c=!0,f||(a=[K(l,"wheel",i[20],{passive:!0}),K(l,"scroll",i[21]),K(n,"wheel",i[22],{passive:!0}),K(e,"resize",i[14]),K(e,"scroll",i[23]),K(e,"touchmove",i[24],{passive:!0}),K(e,"click",i[25]),K(e,"keypress",i[17])],f=!0)},p(_,d){var V;const y={};d&4&&(y.data=_[2]),d&16&&(y.items=_[4]),d&256&&(y.scrollTopVal=_[8]),t.$set(y);const T={};d&16&&(T.items=_[4]),d&1024&&(T.data=_[10]),d&1&&(T.screenSize=_[0]),d&64&&(T.essaysItems=_[6]),d&32&&(T.visibleItemsID=_[5]),r.$set(T),(!c||d&4)&&$e(e,"--theme-color",((V=_[2].meta)==null?void 0:V.color)||"blue")},i(_){c||(C(t.$$.fragment,_),C(r.$$.fragment,_),C(u.$$.fragment,_),c=!0)},o(_){U(t.$$.fragment,_),U(r.$$.fragment,_),U(u.$$.fragment,_),c=!1},d(_){_&&p(e),ve(t),i[19](null),ve(r),ve(u),i[26](null),f=!1,Oe(a)}}}function Fl(i){let e,l,t,s;return{c(){e=A("article"),l=A("section"),t=A("h4"),s=$("Loading..."),this.h()},l(n){e=N(n,"ARTICLE",{class:!0});var r=M(e);l=N(r,"SECTION",{class:!0});var o=M(l);t=N(o,"H4",{});var u=M(t);s=x(u,"Loading..."),u.forEach(p),o.forEach(p),r.forEach(p),this.h()},h(){h(l,"class","short_text svelte-15zdm0q"),h(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),z(e,l),z(l,t),z(t,s)},p:j,i:j,o:j,d(n){n&&p(e)}}}function Bl(i){let e,l,t,s;return{c(){e=A("article"),l=A("section"),t=A("h4"),s=$("404 Page not found"),this.h()},l(n){e=N(n,"ARTICLE",{class:!0});var r=M(e);l=N(r,"SECTION",{class:!0});var o=M(l);t=N(o,"H4",{});var u=M(t);s=x(u,"404 Page not found"),u.forEach(p),o.forEach(p),r.forEach(p),this.h()},h(){h(l,"class","short_text svelte-15zdm0q"),h(e,"class","svelte-15zdm0q")},m(n,r){P(n,e,r),z(e,l),z(l,t),z(t,s)},p:j,i:j,o:j,d(n){n&&p(e)}}}function Ot(i){var G,ee;let e,l,t,s,n,r,o,u,c,f,a,_,d,y,T,V,S,q,m,g,v,I,w,L,B,F,D,R,Q,le;return document.title=e=((ee=(G=i[2])==null?void 0:G.meta)==null?void 0:ee.title)||Le,{c(){l=H(),t=A("meta"),n=H(),r=A("meta"),u=H(),c=A("meta"),a=H(),_=A("meta"),y=H(),T=A("meta"),S=H(),q=A("meta"),m=H(),g=A("meta"),I=H(),w=A("meta"),B=H(),F=A("meta"),R=H(),Q=A("meta"),this.h()},l(b){l=J(b),t=N(b,"META",{name:!0,content:!0}),n=J(b),r=N(b,"META",{property:!0,content:!0}),u=J(b),c=N(b,"META",{property:!0,content:!0}),a=J(b),_=N(b,"META",{property:!0,content:!0}),y=J(b),T=N(b,"META",{property:!0,content:!0}),S=J(b),q=N(b,"META",{name:!0,content:!0}),m=J(b),g=N(b,"META",{property:!0,content:!0}),I=J(b),w=N(b,"META",{name:!0,content:!0}),B=J(b),F=N(b,"META",{name:!0,content:!0}),R=J(b),Q=N(b,"META",{name:!0,content:!0}),this.h()},h(){var b,k,E,O,Y,ne,Z,te,oe,X,ae,re,he,ye;h(t,"name","description"),h(t,"content",s=((k=(b=i[2])==null?void 0:b.meta)==null?void 0:k.description)||Ae),h(r,"property","og:url"),h(r,"content",o=i[9].url.origin),h(c,"property","og:title"),h(c,"content",f=((O=(E=i[2])==null?void 0:E.meta)==null?void 0:O.title)||Le),h(_,"property","og:description"),h(_,"content",d=((ne=(Y=i[2])==null?void 0:Y.meta)==null?void 0:ne.description)||Ae),h(T,"property","og:image"),h(T,"content",V=((te=(Z=i[2])==null?void 0:Z.meta)==null?void 0:te.cover)||Fe),h(q,"name","twitter:card"),h(q,"content","summary_large_image"),h(g,"property","twitter:url"),h(g,"content",v=i[9].url.origin),h(w,"name","twitter:title"),h(w,"content",L=((X=(oe=i[2])==null?void 0:oe.meta)==null?void 0:X.title)||Le),h(F,"name","twitter:description"),h(F,"content",D=((re=(ae=i[2])==null?void 0:ae.meta)==null?void 0:re.description)||Ae),h(Q,"name","twitter:image"),h(Q,"content",le=((ye=(he=i[2])==null?void 0:he.meta)==null?void 0:ye.cover)||Fe)},m(b,k){P(b,l,k),P(b,t,k),P(b,n,k),P(b,r,k),P(b,u,k),P(b,c,k),P(b,a,k),P(b,_,k),P(b,y,k),P(b,T,k),P(b,S,k),P(b,q,k),P(b,m,k),P(b,g,k),P(b,I,k),P(b,w,k),P(b,B,k),P(b,F,k),P(b,R,k),P(b,Q,k)},p(b,k){var E,O,Y,ne,Z,te,oe,X,ae,re,he,ye,ze,Me,qe,Se;k&4&&e!==(e=((O=(E=b[2])==null?void 0:E.meta)==null?void 0:O.title)||Le)&&(document.title=e),k&4&&s!==(s=((ne=(Y=b[2])==null?void 0:Y.meta)==null?void 0:ne.description)||Ae)&&h(t,"content",s),k&512&&o!==(o=b[9].url.origin)&&h(r,"content",o),k&4&&f!==(f=((te=(Z=b[2])==null?void 0:Z.meta)==null?void 0:te.title)||Le)&&h(c,"content",f),k&4&&d!==(d=((X=(oe=b[2])==null?void 0:oe.meta)==null?void 0:X.description)||Ae)&&h(_,"content",d),k&4&&V!==(V=((re=(ae=b[2])==null?void 0:ae.meta)==null?void 0:re.cover)||Fe)&&h(T,"content",V),k&512&&v!==(v=b[9].url.origin)&&h(g,"content",v),k&4&&L!==(L=((ye=(he=b[2])==null?void 0:he.meta)==null?void 0:ye.title)||Le)&&h(w,"content",L),k&4&&D!==(D=((Me=(ze=b[2])==null?void 0:ze.meta)==null?void 0:Me.description)||Ae)&&h(F,"content",D),k&4&&le!==(le=((Se=(qe=b[2])==null?void 0:qe.meta)==null?void 0:Se.cover)||Fe)&&h(Q,"content",le)},d(b){b&&p(l),b&&p(t),b&&p(n),b&&p(r),b&&p(u),b&&p(c),b&&p(a),b&&p(_),b&&p(y),b&&p(T),b&&p(S),b&&p(q),b&&p(m),b&&p(g),b&&p(I),b&&p(w),b&&p(B),b&&p(F),b&&p(R),b&&p(Q)}}}function Ul(i){let e,l,t,s,n,r,o,u;Bt(i[18]);const c=[Bl,Fl,Gl],f=[];function a(d,y){return d[2]==null&&d[3]==null?0:d[3]==null?1:2}l=a(i),t=f[l]=c[l](i);let _=i[2]!=null&&Ot(i);return{c(){e=A("div"),t.c(),s=H(),_&&_.c(),n=W()},l(d){e=N(d,"DIV",{});var y=M(e);t.l(y),y.forEach(p),s=J(d);const T=Ut("svelte-hn2qma",document.head);_&&_.l(T),n=W(),T.forEach(p)},m(d,y){P(d,e,y),f[l].m(e,null),P(d,s,y),_&&_.m(document.head,null),z(document.head,n),r=!0,o||(u=[K(window,"resize",i[14]),K(window,"click",i[14]),K(window,"resize",i[18])],o=!0)},p(d,[y]){let T=l;l=a(d),l===T?f[l].p(d,y):(fe(),U(f[T],1,1,()=>{f[T]=null}),ce(),t=f[l],t?t.p(d,y):(t=f[l]=c[l](d),t.c()),C(t,1),t.m(e,null)),d[2]!=null?_?_.p(d,y):(_=Ot(d),_.c(),_.m(n.parentNode,n)):_&&(_.d(1),_=null)},i(d){r||(C(t),r=!0)},o(d){U(t),r=!1},d(d){d&&p(e),f[l].d(),d&&p(s),_&&_.d(d),p(n),o=!1,Oe(u)}}}function Wl(i,e,l){let t,s,n,r,o,u;ie(i,Ht,G=>l(9,t=G)),ie(i,xe,G=>l(10,s=G)),ie(i,Je,G=>l(16,n=G)),ie(i,We,G=>l(11,o=G)),ie(i,Ne,G=>l(12,u=G));let{data:c}=e,f,a,_=[],d,y,T=[],V=[],S,q;const m=ke(!1);ie(i,m,G=>l(27,r=G));const g=()=>{se(m,r=!0,r)};je(async()=>{l(2,_=[...c.posts].find(ee=>ee.path.includes(t.params.slug))),l(4,y=await pl(_.text)),l(5,T=y.filter(ee=>!ee.set).map(ee=>{var b;return`${_e}/resources/${(b=ee.data)==null?void 0:b["o:id"]}`})),l(3,d=await Gt(y)),se(xe,s=d,s);const G=localStorage.getItem("selectedLanguage");l(6,V=c.posts.reduce((ee,b)=>(!b.path.includes(t.params.slug)&&b.meta.lang==G&&b.links.map(k=>{const E=ee.find(Y=>Y.id===k),O={title:b.meta.title,url:b.path};E?E.essays.some(Y=>Y.title===O.title&&Y.url===O.url)||E.essays.push(O):ee.push({id:k,essays:[O]})}),ee),[]))});function v(G){Be.call(this,i,G)}function I(){l(0,f=window.innerWidth)}function w(G){we[G?"unshift":"push"](()=>{a=G,l(1,a)})}const L=()=>{g(),se(Ne,u=!1,u),l(8,q=a==null?void 0:a.scrollTop)},B=()=>{f<1e3&&(g(),l(8,q=a==null?void 0:a.scrollTop),se(Ne,u=!1,u))},F=()=>{f>1e3&&se(Ne,u=!0,u)},D=()=>{se(We,o=S==null?void 0:S.scrollLeft,o)},R=()=>{se(We,o=S==null?void 0:S.scrollLeft,o),g()},Q=()=>{g()};function le(G){we[G?"unshift":"push"](()=>{S=G,l(7,S)})}return i.$$set=G=>{"data"in G&&l(15,c=G.data)},i.$$.update=()=>{i.$$.dirty&65536&&g()},[f,a,_,d,y,T,V,S,q,t,s,o,u,m,g,c,n,v,I,w,L,B,F,D,R,Q,le]}class Zl extends Pe{constructor(e){super(),Te(this,e,Wl,Ul,De,{data:15})}}export{Zl as component,Ql as universal};
